var io=Object.defineProperty;var $r=e=>{throw TypeError(e)};var so=(e,t,n)=>t in e?io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var J=(e,t,n)=>so(e,typeof t!="symbol"?t+"":t,n),Zn=(e,t,n)=>t.has(e)||$r("Cannot "+n);var x=(e,t,n)=>(Zn(e,t,"read from private field"),n?n.call(e):t.get(e)),M=(e,t,n)=>t.has(e)?$r("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),P=(e,t,n,r)=>(Zn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Pe=(e,t,n)=>(Zn(e,t,"access private method"),n);var mt=(e,t,n,r)=>({set _(i){P(e,t,i,n)},get _(){return x(e,t,r)}});import{w as j,g as U}from"./B0lovaqf.js";var oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ao(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function je(e,t){if(e)return;let n;switch(typeof t){case"string":n=new Error(t);break;case"function":n=new Error(t());break;default:n=t}throw n}function Gi(e,t){const n=typeof e;if(n!==t)throw new Error(`Expected an object of type '${t}', got '${n}'.`)}function co(e){if(e===null)return"null";const t=typeof e;return t==="object"||t==="function"?Object.prototype.toString.call(e).slice(8,-1):t}function Pr(e,t){if(!(e instanceof t))throw new Error(`Expected an instance of '${t.name}', got '${co(e)}'.`)}function Ie(e){return e?Array.isArray(e)?e.length===0:Object.keys(e).length===0:!0}function fe(e){return!Ie(e)}function ie(e){return e==null||Number.isNaN(e)}function q(e){return!ie(e)}function At(e){if(e)return je(e.length>0,"Empty array."),e[0]}function lo(e){if(e)return je(e.length>0,"Empty array."),uo(e,-1)}function uo(e,t){const n=e==null?void 0:e.length;if(n)return t<0&&(t+=n),e[t]}function fo(e,t){return e.some((n,r)=>e.findIndex(i=>t(i)===t(n))!==r)}function ho(e,t){if(Ie(e))return[];if(e.length<=t)return[e];const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}function go(e,t,n="asc"){return[...e].sort((r,i)=>t(r)>t(i)?n==="asc"?1:-1:t(r)<t(i)?n==="asc"?-1:1:0)}function mo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Gr(e,t){if(e===t)return!0;if(t.length>e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function po(e,t){if(e===t)return!0;if(t.length>e.length)return!1;const n=e.length-t.length;for(let r=t.length-1;r>=0;r--)if(t[r]!==e[r+n])return!1;return!0}var $=BigInt(0),It=BigInt(1),Wi=BigInt(7);BigInt(10);var bo=BigInt(63),qi=BigInt(127),Xi=BigInt(128);function ce(e){return typeof e=="bigint"?e:BigInt(e)}function dr(e,t,n){let r=$;if(Ie(e))return r;for(const i of e)(ie(n)||n(i))&&(r+=t(i));return r}var Ct="nanoErgs";function Ye(e,t){const n={};for(const r of e)if((ie(t)||t===Ct)&&(n[Ct]=(n[Ct]||$)+ce(r.value)),t!==Ct)for(const i of r.assets)q(t)&&t!==i.tokenId||(n[i.tokenId]=(n[i.tokenId]||$)+ce(i.amount));return q(t)?n[t]||$:{nanoErgs:n[Ct]||$,tokens:Object.keys(n).filter(r=>r!==Ct).map(r=>({tokenId:r,amount:n[r]}))}}function Pn(e,t,n=!1){Array.isArray(e)&&(e=Ye(e)),Array.isArray(t)&&(t=Ye(t));const r=[],i=e.nanoErgs-t.nanoErgs,s=new Map(t.tokens.map(o=>[o.tokenId,o.amount]));for(const o of e.tokens){const l=s.get(o.tokenId)||$,g=o.amount-(l||$);g!==$&&r.push({tokenId:o.tokenId,amount:g}),l>$&&s.delete(o.tokenId)}if(!n&&s.size>0)for(const[o,l]of s)r.push({tokenId:o,amount:-l});return{nanoErgs:i,tokens:r}}var Wr=4,wo=9;function yo(e){let t=0;for(let n=Wr;n<=wo;n++){const r=`R${n}`;if(e[r]){if(n===Wr){t=n;continue}if(n-t>1)return!1;t=n}}return!0}function gr(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;for(const r of e)Pr(r,Uint8Array),t.set(r,n),n+=r.length;return t}function Ki(e){return!e||e.length%2?!1:!Number.isNaN(Number(e.startsWith("0x")?e:`0x${e}`))}function cn(e){return e.length/2}var Sn=(e=>(e[e.Mainnet=0]="Mainnet",e[e.Testnet=16]="Testnet",e))(Sn||{}),Ee=(e=>(e[e.P2PK=1]="P2PK",e[e.P2SH=2]="P2SH",e[e.P2S=3]="P2S",e[e.ADH=4]="ADH",e))(Ee||{}),qr={sizeInclusion:8,constantSegregation:16},Or=class{constructor(){J(this,"_items");this._items=[]}_isIndexOutOfBounds(e){return e<0||e>=this._items.length}[Symbol.iterator](){let e=0;return{next:()=>({done:e>=this.length,value:this._items[e++]})}}get length(){return this._items.length}get isEmpty(){return this.length===0}at(e){if(this._isIndexOutOfBounds(e))throw new RangeError(`Index '${e}' is out of range.`);return this._items[e]}add(e,t){return this._addOneOrMore(e,t)}_addOne(e,t){if(q(t)&&q(t.index)){if(t.index===this.length)return this._items.push(this._map(e)),this.length;if(this._isIndexOutOfBounds(t.index))throw new RangeError(`Index '${t.index}' is out of range.`);return this._items.splice(t.index,0,this._map(e)),this.length}return this._items.push(this._map(e)),this._items.length}_addOneOrMore(e,t){if(Array.isArray(e)){q(t)&&q(t.index)&&(e=e.reverse());for(const n of e)this._addOne(n,t)}else this._addOne(e,t);return this.length}toArray(){return[...this._items]}reduce(e,t){return this._items.reduce(e,t)}},ln=class extends Error{constructor(e,t){super(e,t),Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name}};function er(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Eo(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Qi(e,...t){if(!Eo(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Dn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Yi(e,t){Qi(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ln(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function tr(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Oe(e,t){return e<<32-t|e>>>t}const wt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ji(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const Ge=wt?e=>e:e=>Ji(e);function Nt(e){for(let t=0;t<e.length;t++)e[t]=Ji(e[t])}function vo(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Bt(e){return typeof e=="string"&&(e=vo(e)),Qi(e),e}class Zi{clone(){return this._cloneInto()}}function So(e){const t=r=>e().update(Bt(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function To(e){const t=(r,i)=>e(i).update(Bt(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const xo=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);class _o extends Zi{constructor(t,n,r={},i,s,o){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,er(t),er(n),er(i),n<0||n>i)throw new Error("outputLen bigger than keyLen");if(r.key!==void 0&&(r.key.length<1||r.key.length>i))throw new Error("key length must be undefined or 1.."+i);if(r.salt!==void 0&&r.salt.length!==s)throw new Error("salt must be undefined or "+s);if(r.personalization!==void 0&&r.personalization.length!==o)throw new Error("personalization must be undefined or "+o);this.buffer=new Uint8Array(t),this.buffer32=Ln(this.buffer)}update(t){Dn(this);const{blockLen:n,buffer:r,buffer32:i}=this;t=Bt(t);const s=t.length,o=t.byteOffset,l=t.buffer;for(let g=0;g<s;){this.pos===n&&(wt||Nt(i),this.compress(i,0,!1),wt||Nt(i),this.pos=0);const a=Math.min(n-this.pos,s-g),f=o+g;if(a===n&&!(f%4)&&g+a<s){const h=new Uint32Array(l,f,Math.floor((s-g)/4));wt||Nt(h);for(let b=0;g+n<s;b+=i.length,g+=n)this.length+=n,this.compress(h,b,!1);wt||Nt(h);continue}r.set(t.subarray(g,g+a),this.pos),this.pos+=a,this.length+=a,g+=a}return this}digestInto(t){Dn(this),Yi(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,this.buffer.subarray(n).fill(0),wt||Nt(r),this.compress(r,0,!0),wt||Nt(r);const i=Ln(t);this.get().forEach((s,o)=>i[o]=Ge(s))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:s,outputLen:o,pos:l}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.length=r,t.finished=i,t.destroyed=s,t.outputLen=o,t.buffer.set(n),t.pos=l,t}}const xn=BigInt(2**32-1),mr=BigInt(32);function es(e,t=!1){return t?{h:Number(e&xn),l:Number(e>>mr&xn)}:{h:Number(e>>mr&xn)|0,l:Number(e&xn)|0}}function Io(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=es(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const Bo=(e,t)=>BigInt(e>>>0)<<mr|BigInt(t>>>0),ko=(e,t,n)=>e>>>n,Ro=(e,t,n)=>e<<32-n|t>>>n,Ao=(e,t,n)=>e>>>n|t<<32-n,Co=(e,t,n)=>e<<32-n|t>>>n,No=(e,t,n)=>e<<64-n|t>>>n-32,Po=(e,t,n)=>e>>>n-32|t<<64-n,Oo=(e,t)=>t,Fo=(e,t)=>e,Mo=(e,t,n)=>e<<n|t>>>32-n,Do=(e,t,n)=>t<<n|e>>>32-n,Lo=(e,t,n)=>t<<n-32|e>>>64-n,Uo=(e,t,n)=>e<<n-32|t>>>64-n;function Ho(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const jo=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Vo=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,zo=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),$o=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,Go=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Wo=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,he={fromBig:es,split:Io,toBig:Bo,shrSH:ko,shrSL:Ro,rotrSH:Ao,rotrSL:Co,rotrBH:No,rotrBL:Po,rotr32H:Oo,rotr32L:Fo,rotlSH:Mo,rotlSL:Do,rotlBH:Lo,rotlBL:Uo,add:Ho,add3L:jo,add3H:Vo,add4L:zo,add4H:$o,add5H:Wo,add5L:Go},ne=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),N=new Uint32Array(32);function Ze(e,t,n,r,i,s){const o=i[s],l=i[s+1];let g=N[2*e],a=N[2*e+1],f=N[2*t],h=N[2*t+1],b=N[2*n],m=N[2*n+1],T=N[2*r],k=N[2*r+1],A=he.add3L(g,f,o);a=he.add3H(A,a,h,l),g=A|0,{Dh:k,Dl:T}={Dh:k^a,Dl:T^g},{Dh:k,Dl:T}={Dh:he.rotr32H(k,T),Dl:he.rotr32L(k,T)},{h:m,l:b}=he.add(m,b,k,T),{Bh:h,Bl:f}={Bh:h^m,Bl:f^b},{Bh:h,Bl:f}={Bh:he.rotrSH(h,f,24),Bl:he.rotrSL(h,f,24)},N[2*e]=g,N[2*e+1]=a,N[2*t]=f,N[2*t+1]=h,N[2*n]=b,N[2*n+1]=m,N[2*r]=T,N[2*r+1]=k}function et(e,t,n,r,i,s){const o=i[s],l=i[s+1];let g=N[2*e],a=N[2*e+1],f=N[2*t],h=N[2*t+1],b=N[2*n],m=N[2*n+1],T=N[2*r],k=N[2*r+1],A=he.add3L(g,f,o);a=he.add3H(A,a,h,l),g=A|0,{Dh:k,Dl:T}={Dh:k^a,Dl:T^g},{Dh:k,Dl:T}={Dh:he.rotrSH(k,T,16),Dl:he.rotrSL(k,T,16)},{h:m,l:b}=he.add(m,b,k,T),{Bh:h,Bl:f}={Bh:h^m,Bl:f^b},{Bh:h,Bl:f}={Bh:he.rotrBH(h,f,63),Bl:he.rotrBL(h,f,63)},N[2*e]=g,N[2*e+1]=a,N[2*t]=f,N[2*t+1]=h,N[2*n]=b,N[2*n+1]=m,N[2*r]=T,N[2*r+1]=k}class qo extends _o{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=ne[0]|0,this.v0h=ne[1]|0,this.v1l=ne[2]|0,this.v1h=ne[3]|0,this.v2l=ne[4]|0,this.v2h=ne[5]|0,this.v3l=ne[6]|0,this.v3h=ne[7]|0,this.v4l=ne[8]|0,this.v4h=ne[9]|0,this.v5l=ne[10]|0,this.v5h=ne[11]|0,this.v6l=ne[12]|0,this.v6h=ne[13]|0,this.v7l=ne[14]|0,this.v7h=ne[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|65536|1<<24,t.salt){const r=Ln(Bt(t.salt));this.v4l^=Ge(r[0]),this.v4h^=Ge(r[1]),this.v5l^=Ge(r[2]),this.v5h^=Ge(r[3])}if(t.personalization){const r=Ln(Bt(t.personalization));this.v6l^=Ge(r[0]),this.v6h^=Ge(r[1]),this.v7l^=Ge(r[2]),this.v7h^=Ge(r[3])}if(t.key){const r=new Uint8Array(this.blockLen);r.set(Bt(t.key)),this.update(r)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:s,v2h:o,v3l:l,v3h:g,v4l:a,v4h:f,v5l:h,v5h:b,v6l:m,v6h:T,v7l:k,v7h:A}=this;return[t,n,r,i,s,o,l,g,a,f,h,b,m,T,k,A]}set(t,n,r,i,s,o,l,g,a,f,h,b,m,T,k,A){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=l|0,this.v3h=g|0,this.v4l=a|0,this.v4h=f|0,this.v5l=h|0,this.v5h=b|0,this.v6l=m|0,this.v6h=T|0,this.v7l=k|0,this.v7h=A|0}compress(t,n,r){this.get().forEach((g,a)=>N[a]=g),N.set(ne,16);let{h:i,l:s}=he.fromBig(BigInt(this.length));N[24]=ne[8]^s,N[25]=ne[9]^i,r&&(N[28]=~N[28],N[29]=~N[29]);let o=0;const l=xo;for(let g=0;g<12;g++)Ze(0,4,8,12,t,n+2*l[o++]),et(0,4,8,12,t,n+2*l[o++]),Ze(1,5,9,13,t,n+2*l[o++]),et(1,5,9,13,t,n+2*l[o++]),Ze(2,6,10,14,t,n+2*l[o++]),et(2,6,10,14,t,n+2*l[o++]),Ze(3,7,11,15,t,n+2*l[o++]),et(3,7,11,15,t,n+2*l[o++]),Ze(0,5,10,15,t,n+2*l[o++]),et(0,5,10,15,t,n+2*l[o++]),Ze(1,6,11,12,t,n+2*l[o++]),et(1,6,11,12,t,n+2*l[o++]),Ze(2,7,8,13,t,n+2*l[o++]),et(2,7,8,13,t,n+2*l[o++]),Ze(3,4,9,14,t,n+2*l[o++]),et(3,4,9,14,t,n+2*l[o++]);this.v0l^=N[0]^N[16],this.v0h^=N[1]^N[17],this.v1l^=N[2]^N[18],this.v1h^=N[3]^N[19],this.v2l^=N[4]^N[20],this.v2h^=N[5]^N[21],this.v3l^=N[6]^N[22],this.v3h^=N[7]^N[23],this.v4l^=N[8]^N[24],this.v4h^=N[9]^N[25],this.v5l^=N[10]^N[26],this.v5h^=N[11]^N[27],this.v6l^=N[12]^N[28],this.v6h^=N[13]^N[29],this.v7l^=N[14]^N[30],this.v7h^=N[15]^N[31],N.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Xo=To(e=>new qo(e));function Ko(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),l=Number(n&s),g=r?4:0,a=r?0:4;e.setUint32(t+g,o,r),e.setUint32(t+a,l,r)}function Qo(e,t,n){return e&t^~e&n}function Yo(e,t,n){return e&t^e&n^t&n}class Jo extends Zi{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=tr(this.buffer)}update(t){Dn(this);const{view:n,buffer:r,blockLen:i}=this;t=Bt(t);const s=t.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const g=tr(t);for(;i<=s-o;o+=i)this.process(g,o);continue}r.set(t.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Dn(this),Yi(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;Ko(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=tr(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const a=g/4,f=this.get();if(a>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<a;h++)l.setUint32(4*h,f[h],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return t.length=i,t.pos=l,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}}const Zo=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nt=new Uint32Array(64);class ea extends Jo{constructor(){super(64,32,8,!1),this.A=tt[0]|0,this.B=tt[1]|0,this.C=tt[2]|0,this.D=tt[3]|0,this.E=tt[4]|0,this.F=tt[5]|0,this.G=tt[6]|0,this.H=tt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:l,H:g}=this;return[t,n,r,i,s,o,l,g]}set(t,n,r,i,s,o,l,g){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=g|0}process(t,n){for(let h=0;h<16;h++,n+=4)nt[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const b=nt[h-15],m=nt[h-2],T=Oe(b,7)^Oe(b,18)^b>>>3,k=Oe(m,17)^Oe(m,19)^m>>>10;nt[h]=k+nt[h-7]+T+nt[h-16]|0}let{A:r,B:i,C:s,D:o,E:l,F:g,G:a,H:f}=this;for(let h=0;h<64;h++){const b=Oe(l,6)^Oe(l,11)^Oe(l,25),m=f+b+Qo(l,g,a)+Zo[h]+nt[h]|0,k=(Oe(r,2)^Oe(r,13)^Oe(r,22))+Yo(r,i,s)|0;f=a,a=g,g=l,l=o+m|0,o=s,s=i,i=r,r=m+k|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,g=g+this.F|0,a=a+this.G|0,f=f+this.H|0,this.set(r,i,s,o,l,g,a,f)}roundClean(){nt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ta=So(()=>new ea);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ts(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function na(e){if(typeof e!="function")throw new Error("function expected");return!0}function br(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Fr(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function wr(e){if(!Array.isArray(e))throw new Error("array expected")}function ns(e,t){if(!ts(!0,t))throw new Error(`${e}: array of strings expected`)}function ra(e,t){if(!ts(!1,t))throw new Error(`${e}: array of numbers expected`)}function rs(...e){const t=s=>s,n=(s,o)=>l=>s(o(l)),r=e.map(s=>s.encode).reduceRight(n,t),i=e.map(s=>s.decode).reduce(n,t);return{encode:r,decode:i}}function ia(e){const t=typeof e=="string"?e.split(""):e,n=t.length;ns("alphabet",t);const r=new Map(t.map((i,s)=>[i,s]));return{encode:i=>(wr(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${e}`);return t[s]})),decode:i=>(wr(i),i.map(s=>{br("alphabet.decode",s);const o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${e}`);return o}))}}function sa(e=""){return br("join",e),{encode:t=>(ns("join.decode",t),t.join(e)),decode:t=>(br("join.decode",t),t.split(e))}}function Xr(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(wr(e),!e.length)return[];let r=0;const i=[],s=Array.from(e,l=>{if(Fr(l),l<0||l>=t)throw new Error(`invalid integer: ${l}`);return l}),o=s.length;for(;;){let l=0,g=!0;for(let a=r;a<o;a++){const f=s[a],h=t*l,b=h+f;if(!Number.isSafeInteger(b)||h/t!==l||b-f!==h)throw new Error("convertRadix: carry overflow");const m=b/n;l=b%n;const T=Math.floor(m);if(s[a]=T,!Number.isSafeInteger(T)||T*n+l!==b)throw new Error("convertRadix: carry overflow");if(g)T?g=!1:r=a;else continue}if(i.push(l),g)break}for(let l=0;l<e.length-1&&e[l]===0;l++)i.push(0);return i.reverse()}function oa(e){Fr(e);const t=2**8;return{encode:n=>{if(!pr(n))throw new Error("radix.encode input should be Uint8Array");return Xr(Array.from(n),t,e)},decode:n=>(ra("radix.decode",n),Uint8Array.from(Xr(n,e,t)))}}function aa(e,t){return Fr(e),na(t),{encode(n){if(!pr(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!pr(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=n.slice(-e),s=t(r).slice(0,e);for(let o=0;o<e;o++)if(s[o]!==i[o])throw new Error("Invalid checksum");return r}}}const ca=e=>rs(oa(58),ia(e),sa("")),is=ca("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),la=e=>rs(aa(4,t=>e(e(t))),is),ua=la;var fa=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),ze={ZERO:48,NINE:57,A_UP:65,F_UP:70,A_LO:97,F_LO:102};function ha(e){Pr(e,Uint8Array);let t="";for(let n=0,r=e.length;n<r;n++)t+=fa[e[n]];return t}function da(e){Gi(e,"string"),je(e.length%2===0,"Invalid hex padding.");const t=e.length/2,n=new Uint8Array(t);for(let r=0,i=0;r<t;r++){const s=Kr(e.charCodeAt(i++)),o=Kr(e.charCodeAt(i++));n[r]=s*16+o}return n}function Kr(e){if(e>=ze.ZERO&&e<=ze.NINE)return e-ze.ZERO;if(e>=ze.A_UP&&e<=ze.F_UP)return e-(ze.A_UP-10);if(e>=ze.A_LO&&e<=ze.F_LO)return e-(ze.A_LO-10);throw new Error("Invalid byte sequence.")}var de={encode:ha,decode:da};function ga(e){return Pr(e,Uint8Array),new TextDecoder().decode(e)}function ma(e){return Gi(e,"string"),new Uint8Array(new TextEncoder().encode(e))}var nr={encode:ga,decode:ma};ua(ba);var Pt=is;function He(e){return typeof e=="string"?de.decode(e):e}function pa(e,t){return t!=null&&t.key&&(t.key=He(t.key)),t!=null&&t.salt&&(t.salt=He(t.salt)),t!=null&&t.personalization&&(t.personalization=He(t.personalization)),Xo(He(e),t)}function Qt(e,t){return pa(He(e),{dkLen:32,...t})}function ba(e){return ta(He(e))}function ss(e){if(Ie(e))return!1;switch(e[0]){case 2:case 3:return e.length===33;case 4:return e.length===65;default:return!1}}function wa(e){const t=BigInt(e.length%2?`0x0${e}`:`0x${e}`);return 128&Number.parseInt(e.slice(0,2),16)?-os(t):t}function ya(e){const t=e>=$;let n=(t?e:os(e)).toString(16);return n.length%2&&(n=`0${n}`),t&&128&Number.parseInt(n.slice(0,2),16)?`00${n}`:n}function os(e){let t=e;const n=t<$;n&&(t=-t);const r=t.toString(2);let i=r.length;const s=i%8;s>0?i+=8-s:n&&At(r)==="1"&&r.indexOf("1",1)!==-1&&(i+=8);const o=(1n<<BigInt(i))-1n;return(~t&o)+1n}function Ea(e,t){if(t===0)return e.write(0);if(t<0)throw new RangeError("Variable Length Quantity not supported for negative numbers.");let n=t;do{let r=n&127;n>>=7,n>0&&(r|=128),e.write(r)}while(n>0);return e}function Qr(e){if(e.isEmpty)return 0;let t=0,n=0,r=0;do r=e.readByte(),t|=(r&127)<<n,n+=7;while(r&128);return t}function va(e,t){if(t===$)return e.write(0);if(t<$)throw new RangeError("Variable Length Quantity not supported for negative numbers");let n=t;do{let r=Number(n&qi);n>>=Wi,n>0&&(r|=128),e.write(r)}while(n>0);return e}function rr(e){if(e.isEmpty)return $;let t=$,n=$,r=$;do r=BigInt(e.readByte()),t|=(r&qi)<<n,n+=Wi;while((r&Xi)!==$);return t}function ue(e){let t=0,n=e;if(typeof n=="number"){do t++,n=Math.floor(n/128);while(n>0);return t}n=ce(n);do t++,n/=Xi;while(n>$);return t}var Sa=BigInt(31),as=e=>BigInt.asUintN(64,e),Ta=e=>BigInt.asIntN(64,e),ir=e=>BigInt.asIntN(32,e),xa=e=>BigInt.asUintN(32,e),Un={encode:e=>{const t=ir(BigInt(e));return as(ir(t<<It)^ir(t>>Sa))},decode:e=>{const t=xa(e);return Number(t>>It^-(t&It))}},cs={encode:e=>as(e<<It^e>>bo),decode:e=>Ta(e>>It^-(e&It))},_a=255,Ia=127,Ba=-32768,ka=32767,Ra=-2147483648,Aa=2147483647,Ca=-BigInt("0x8000000000000000"),Na=BigInt("0x7fffffffffffffff"),Pa=-BigInt("0x8000000000000000000000000000000000000000000000000000000000000000"),Oa=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),it,Me,Fi,Fa=(Fi=class{constructor(e){M(this,it);M(this,Me);P(this,it,He(e)),P(this,Me,0)}get isEmpty(){return Ie(x(this,it))}readBool(){return this.readByte()===1}readBits(e){const t=new Array(e);let n=0;for(let r=0;r<e;r++){const i=x(this,it)[x(this,Me)]>>n++&1;t[r]=i===1,n===8&&(n=0,mt(this,Me)._++)}return n>0&&mt(this,Me)._++,t}readByte(){return x(this,it)[mt(this,Me)._++]}readBytes(e){return x(this,it).subarray(x(this,Me),P(this,Me,x(this,Me)+e))}readVlq(){return Qr(this)}readI8(){const e=this.readByte();return e>Ia?e-(_a+1):e}readI16(){return Un.decode(rr(this))}readI32(){return Un.decode(rr(this))}readI64(){return cs.decode(rr(this))}readI256(){const e=Qr(this);return wa(de.encode(this.readBytes(e)))}},it=new WeakMap,Me=new WeakMap,Fi),ke,pe,Mi,qn=(Mi=class{constructor(e){M(this,ke);M(this,pe);P(this,ke,new Uint8Array(e)),P(this,pe,0)}get length(){return x(this,pe)}writeBool(e){return this.write(e===!0?1:0),this}writeVLQ(e){return Ea(this,e)}writeBigVLQ(e){return va(this,e)}writeI16(e){if(e<Ba||e>ka)throw new RangeError(`Value ${e} is out of range for a 16-bit integer`);return this.writeBigVLQ(Un.encode(e)),this}writeI32(e){if(e<Ra||e>Aa)throw new RangeError(`Value ${e} is out of range for a 32-bit integer`);return this.writeBigVLQ(Un.encode(e))}writeI64(e){if(e<Ca||e>Na)throw new RangeError(`Value ${e} is out of range for a 64-bit integer`);return this.writeBigVLQ(cs.encode(e))}writeI256(e){if(e<Pa||e>Oa)throw new RangeError(`Value ${e} is out of range for a 256-bit integer`);const t=ya(e);return this.writeVLQ(t.length/2).writeHex(t)}write(e){return x(this,ke)[mt(this,pe)._++]=e,this}writeBytes(e){return x(this,ke).set(e,x(this,pe)),P(this,pe,x(this,pe)+e.length),this}writeHex(e){return this.writeBytes(de.decode(e))}writeBits(e){let t=0;for(let n=0;n<e.length;n++)e[n]?x(this,ke)[x(this,pe)]|=1<<t++:x(this,ke)[x(this,pe)]&=~(1<<t++),t===8&&(t=0,mt(this,pe)._++);return t>0&&mt(this,pe)._++,this}writeChecksum(e=4,t=Qt){const n=t(this.toBytes());return this.writeBytes(e?n.subarray(0,e):n)}encode(e){return e.encode(this.toBytes())}toBytes(){return x(this,pe)===x(this,ke).length?x(this,ke):x(this,ke).subarray(0,x(this,pe))}},ke=new WeakMap,pe=new WeakMap,Mi),ls=class{coerce(e){return e}},us=class extends ls{get embeddable(){return!1}},gt=class extends us{get embeddable(){return!0}},gn,Di,fs=(Di=class extends ls{constructor(t){super();M(this,gn);P(this,gn,t)}get elementsType(){return x(this,gn)}get embeddable(){return!1}},gn=new WeakMap,Di),hs=class extends gt{get code(){return 1}toString(){return"SBool"}},ds=class extends gt{get code(){return 2}toString(){return"SByte"}},gs=class extends gt{get code(){return 3}toString(){return"SShort"}},ms=class extends gt{get code(){return 4}toString(){return"SInt"}},ps=class extends gt{get code(){return 5}coerce(e){return ce(e)}toString(){return"SLong"}},bs=class extends gt{get code(){return 6}coerce(e){return ce(e)}toString(){return"SBigInt"}},ws=class extends gt{get code(){return 7}coerce(e){return typeof e=="string"?de.decode(e):e}toString(){return"SGroupElement"}},ys=class extends gt{get code(){return 8}toString(){return"SSigmaProp"}},Es=class extends us{get code(){return 98}toString(){return"SUnit"}},ae=Object.freeze({embeddable:0,simpleColl:1,nestedColl:2,option:3,optionCollection:4,pairOne:5,pairTwo:6,symmetricPair:7,genericTuple:8}),vs=11,yr=vs+1,Fe=e=>yr*e,Ma=Object.freeze({code:Fe(ae.simpleColl),embeddable:!1,simpleCollTypeCode:Fe(ae.simpleColl),nestedCollTypeCode:Fe(ae.nestedColl)}),Da=Object.freeze({code:Fe(ae.pairOne),embeddable:!1,pairOneTypeCode:Fe(ae.pairOne),pairTwoTypeCode:Fe(ae.pairTwo),tripleTypeCode:Fe(ae.pairTwo),symmetricPairTypeCode:Fe(ae.symmetricPair),quadrupleTypeCode:Fe(ae.symmetricPair),genericTupleTypeCode:Fe(ae.genericTuple)}),C={bool:new hs,byte:new ds,short:new gs,int:new ms,long:new ps,bigInt:new bs,groupElement:new ws,sigmaProp:new ys,unit:new Es,coll:Ma,tuple:Da};function Er(e){return e.code>=C.coll.simpleCollTypeCode&&e.code<=C.coll.nestedCollTypeCode+vs}function Ss(e){return e.code>=C.tuple.pairOneTypeCode&&e.code<=C.tuple.genericTupleTypeCode}function pt(e){switch(e){case C.bool.code:return C.bool;case C.byte.code:return C.byte;case C.short.code:return C.short;case C.int.code:return C.int;case C.long.code:return C.long;case C.bigInt.code:return C.bigInt;case C.groupElement.code:return C.groupElement;case C.sigmaProp.code:return C.sigmaProp;default:throw new Error(`The type code '0x${e.toString(16)}' is not a valid primitive type code.`)}}var On=class extends fs{get code(){return C.coll.code}coerce(e){return this.elementsType.code===C.byte.code&&!(e instanceof Uint8Array)?typeof e=="string"?de.decode(e):Uint8Array.from(e):e.map(t=>this.elementsType.coerce(t))}toString(){return`SColl[${this.elementsType.toString()}]`}},on=class extends fs{get code(){return C.tuple.code}coerce(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this.elementsType[n].coerce(e[n]);return t}toString(){return`(${this.elementsType.map(e=>e.toString()).join(", ")})`}};function Je(e,t,n){return new Proxy(e,{apply:(r,i,s)=>{const o=t??new r;return!n&&Ie(s)?o:new kt(o,...s)}})}function Ts(e,t){return new Proxy(e,{apply:t})}var sr=Je(ds,C.byte);Je(hs,C.bool);Je(gs,C.short);Je(ms,C.int);var pu=Je(ps,C.long);Je(bs,C.bigInt);Je(ws,C.groupElement);Je(ys,C.sigmaProp);Je(Es,void 0,!0);var or=Ts(On,(e,t,n)=>{const[r,i]=n,s=r();return i?new kt(new e(s),i):()=>new e(s)});Ts(on,(e,t,n)=>{const[r,i]=n;if(typeof r=="function"&&typeof i=="function")return()=>new e([r(),i()]);if(r instanceof kt&&i instanceof kt)return new kt(new e([r.type,i.type]),[r.data,i.data]);throw new Error("Invalid tuple declaration.")});var La=33,Yr=205,un={serialize(e,t,n){if(t.embeddable)switch(t.code){case C.bool.code:return n.writeBool(e);case C.byte.code:return n.write(e);case C.short.code:return n.writeI16(e);case C.int.code:return n.writeI32(e);case C.long.code:return n.writeI64(e);case C.bigInt.code:return n.writeI256(e);case C.groupElement.code:return n.writeBytes(e);case C.sigmaProp.code:{const r=e;if(r.type===C.groupElement)return n.write(Yr),un.serialize(r.data,r.type,n);throw Error("Serialization error: SigmaProp operation not implemented.")}}if(Er(t))switch(t.elementsType.code===C.byte.code?je(e instanceof Uint8Array,`SColl[Byte] expected an UInt8Array, got ${typeof e}.`):je(Array.isArray(e),`SColl expected an array, got ${typeof e}.`),n.writeVLQ(e.length),t.elementsType.code){case C.bool.code:return n.writeBits(e);case C.byte.code:return n.writeBytes(e);default:{for(let r=0;r<e.length;r++)un.serialize(e[r],t.elementsType,n);return n}}if(Ss(t)){je(Array.isArray(e),`STupleType serialization expected an array, got ${typeof e}.`);const r=t.elementsType.length;for(let i=0;i<r;i++)un.serialize(e[i],t.elementsType[i],n);return n}if(t.code===C.unit.code)return n;throw Error(`Serialization error: '0x${t.code.toString(16)}' type not implemented.`)},deserialize(e,t){if(e.embeddable)switch(e.code){case C.bool.code:return t.readBool();case C.byte.code:return t.readI8();case C.short.code:return t.readI16();case C.int.code:return t.readI32();case C.long.code:return t.readI64();case C.bigInt.code:return t.readI256();case C.groupElement.code:return t.readBytes(La);case C.sigmaProp.code:{if(t.readByte()===Yr)return this.deserialize(C.groupElement,t);break}}else switch(e.code){case C.coll.code:{const n=t.readVlq(),r=e.elementsType;switch(r.code){case C.bool.code:return t.readBits(n);case C.byte.code:return t.readBytes(n);default:{const i=new Array(n);for(let s=0;s<n;s++)i[s]=this.deserialize(r,t);return i}}}case C.tuple.code:return e.elementsType.map(n=>this.deserialize(n,t));case C.unit.code:return}throw new Error(`Parsing error: '0x${e.code.toString(16)}' type not implemented.`)}},Jr={serialize(e,t){if(e.embeddable)t.write(e.code);else if(e.code===C.unit.code)t.write(e.code);else if(Er(e))if(e.elementsType.embeddable)t.write(C.coll.simpleCollTypeCode+e.elementsType.code);else if(Er(e.elementsType)){const n=e.elementsType;n.elementsType.embeddable?t.write(C.coll.nestedCollTypeCode+n.elementsType.code):(t.write(C.coll.simpleCollTypeCode),this.serialize(n,t))}else t.write(C.coll.simpleCollTypeCode),this.serialize(e.elementsType,t);else if(Ss(e)){switch(e.elementsType.length){case 2:{const n=At(e.elementsType),r=lo(e.elementsType);n.embeddable?n.code===r.code?t.write(C.tuple.symmetricPairTypeCode+n.code):(t.write(C.tuple.pairOneTypeCode+n.code),this.serialize(r,t)):r.embeddable?(t.write(C.tuple.pairTwoTypeCode+r.code),this.serialize(n,t)):(t.write(C.tuple.pairOneTypeCode),this.serialize(n,t),this.serialize(r,t));return}case 3:t.write(C.tuple.tripleTypeCode);break;case 4:t.write(C.tuple.quadrupleTypeCode);break;default:{const n=e.elementsType.length;je(n>=2&&n<=255,"Invalid type: tuples must have between 2 and 255 items."),t.write(C.tuple.genericTupleTypeCode),t.writeVLQ(n)}}for(let n=0;n<e.elementsType.length;n++)this.serialize(e.elementsType[n],t)}else throw new Error("Serialization error: type not implemented.")},deserialize(e){const t=e.readByte();if(je(t>0,`Parsing Error: Unexpected type code '0x${t.toString(16)}'`),t<C.tuple.genericTupleTypeCode){const n=Math.floor(t/yr),r=Math.floor(t%yr);switch(n){case ae.embeddable:return pt(r);case ae.simpleColl:{const i=r===0?this.deserialize(e):pt(r);return new On(i)}case ae.nestedColl:return new On(new On(pt(r)));case ae.pairOne:{const i=r===0?[this.deserialize(e),this.deserialize(e)]:[pt(r),this.deserialize(e)];return new on(i)}case ae.pairTwo:{const i=r===0?[this.deserialize(e),this.deserialize(e),this.deserialize(e)]:[this.deserialize(e),pt(r)];return new on(i)}case ae.symmetricPair:{const i=r===0?[this.deserialize(e),this.deserialize(e),this.deserialize(e),this.deserialize(e)]:[pt(r),pt(r)];return new on(i)}}}switch(t){case C.tuple.genericTupleTypeCode:{const n=e.readVlq(),r=new Array(n);for(let i=0;i<n;i++)r[i]=this.deserialize(e);return new on(r)}case C.unit.code:return C.unit}throw new Error("Not implemented.")}},Ua=4096,mn,pn,Dt,kt=(Dt=class{constructor(t,n){M(this,mn);M(this,pn);P(this,mn,t),P(this,pn,t.coerce(n))}static from(t){je(t.length>0,"Empty constant bytes.");const n=new Fa(t),r=Jr.deserialize(n),i=un.deserialize(r,n);return new Dt(r,i)}get type(){return x(this,mn)}get data(){return x(this,pn)}toBytes(){const t=new qn(Ua);return Jr.serialize(this.type,t),un.serialize(this.data,this.type,t),t.toBytes()}toHex(){return de.encode(this.toBytes())}},mn=new WeakMap,pn=new WeakMap,Dt);function Ha(e,t="strict"){if(t==="strict")return kt.from(e??"").data;if(e)try{return kt.from(e).data}catch{return}}var ja=65535;function vr(e,t=new qn(4096),n){if(t.writeBigVLQ(ce(e.value)),t.writeHex(e.ergoTree),t.writeVLQ(e.creationHeight),Va(t,e.assets,n),za(t,e.additionalRegisters),q(n))return t;if(!xs(e))throw new Error("Invalid box type.");return t.writeHex(e.transactionId).writeVLQ(e.index)}function xs(e){const t=e;return q(t.transactionId)&&q(t.index)}function Va(e,t,n){if(Ie(t)){e.write(0);return}e.writeVLQ(t.length),fe(n)?t.map(r=>e.writeVLQ(n.indexOf(r.tokenId)).writeBigVLQ(ce(r.amount))):t.map(r=>e.writeHex(r.tokenId).writeBigVLQ(ce(r.amount)))}function za(e,t){const n=Object.keys(t).sort();let r=0;for(const i of n)t[i]&&r++;if(e.writeVLQ(r),r!==0)for(const i of n){const s=t[i];q(s)&&e.writeHex(s)}}function $a(e,t){if(ie(e.creationHeight))throw new Error("Box size estimation error: creation height is undefined.");let n=0;n+=ue(q(t)?t:e.value),n+=cn(e.ergoTree),n+=ue(e.creationHeight),n+=ue(e.assets.length);for(const i of e.assets)n+=cn(i.tokenId)+ue(i.amount);let r=0;for(const i in e.additionalRegisters){const s=e.additionalRegisters[i];s&&(n+=cn(s),r++)}return n+=ue(r),n+=32,n+=ue(xs(e)?e.index:ja),n}function Ga(e){const t=new qn(1e5);t.writeVLQ(e.inputs.length),e.inputs.map(r=>Wa(t,r)),t.writeVLQ(e.dataInputs.length),e.dataInputs.map(r=>t.writeHex(r.boxId));const n=Xa(e.outputs);return t.writeVLQ(n.length),n.map(r=>t.writeHex(r)),t.writeVLQ(e.outputs.length),e.outputs.map(r=>vr(r,t,n)),t}function Wa(e,t){e.writeHex(t.boxId),e.write(0),qa(e,t.extension)}function qa(e,t){const n=Object.keys(t);let r=0;for(const i of n)q(t[i])&&r++;if(e.writeVLQ(r),r!==0)for(const i of n){const s=t[i];q(s)&&e.writeVLQ(Number(i)).writeHex(s)}}function Xa(e){const t=new Set;return e.flatMap(n=>n.assets.map(r=>t.add(r.tokenId))),Array.from(t)}var Ka=class extends Error{constructor(){super("One or more inputs was selected more than one time by the current selection strategy.")}},Qa=class extends Error{constructor(t){const n=[];if(t.nanoErgs&&n.push(Zr("nanoErgs",t.nanoErgs)),fe(t.tokens))for(const r of t.tokens)n.push(Zr(r.tokenId,r.amount));super(`Insufficient inputs:${n.join()}`);J(this,"unreached");this.unreached=t}};function Zr(e,t){return`
  > ${e}: ${t==null?void 0:t.toString()}`}var Ya=class{constructor(){J(this,"_inputs")}select(e,t){this._inputs=e;let n=[];fe(t.tokens)&&(n=this._selectTokens(t.tokens));const r=dr(n,i=>i.value);if(ie(t.nanoErgs)&&Ie(t.tokens)||q(t.nanoErgs)&&r<t.nanoErgs){const i=q(t.nanoErgs)?t.nanoErgs-r:void 0;n=n.concat(this._select(i))}return n}_selectTokens(e){let t=[];for(const n of e){const r=q(n.amount)?n.amount-Ye(t,n.tokenId):void 0;r&&r<=$||(t=t.concat(this._select(r,n.tokenId)))}return t}_select(e,t){const n=this._inputs;let r=$,i=[];if(ie(e))t?i=n.filter(s=>s.assets.some(o=>o.tokenId===t)):i=n;else for(let s=0;s<n.length&&r<e;s++)if(t)for(const o of n[s].assets)o.tokenId===t&&(r+=o.amount,i.push(n[s]));else r+=n[s].value,i.push(n[s]);return fe(i)&&(this._inputs=this._inputs.filter(s=>!i.includes(s))),i}},Ja=class{constructor(e){J(this,"_selector");this._selector=e}select(e,t){return this._selector(e,t)}},Za=class{constructor(e){J(this,"_inputs");J(this,"_strategy");J(this,"_ensureFilterPredicate");J(this,"_selector");J(this,"_sortDirection");J(this,"_ensureInclusionBoxIds");this._inputs=e}defineStrategy(e){return this._isISelectionStrategyImplementation(e)?this._strategy=e:this._strategy=new Ja(e),this}select(e){var l;this._strategy||(this._strategy=new Ya);const t=this._deepCloneTarget(e);let n=[...this._inputs],r=[];const i=this._ensureFilterPredicate;let s=this._ensureInclusionBoxIds;if((l=e.tokens)!=null&&l.some(g=>g.tokenId===n[0].boxId)&&(s=new Set(this._ensureInclusionBoxIds).add(n[0].boxId)),i?r=s?n.filter(g=>i(g)||s.has(g.boxId)):n.filter(i):s&&(r=n.filter(g=>s.has(g.boxId))),fe(r)&&(n=n.filter(g=>!r.some(a=>a.boxId===g.boxId)),t.nanoErgs&&t.nanoErgs>$&&(t.nanoErgs-=dr(r,g=>g.value)),fe(t.tokens)&&r.some(g=>!Ie(g.assets))))for(const g of t.tokens)g.amount&&g.amount>$&&(g.amount-=Ye(r,g.tokenId));if(this._selector&&(n=go(n,this._selector,this._sortDirection||"asc")),r=r.concat(this._strategy.select(n,t)),fo(r,g=>g.boxId))throw new Ka;const o=this._getUnreachedTargets(r,e);if(o.nanoErgs||fe(o.tokens))throw new Qa(o);return r}_deepCloneTarget(e){return{nanoErgs:e.nanoErgs,tokens:e.tokens?e.tokens.map(t=>({tokenId:t.tokenId,amount:t.amount})):void 0}}_getUnreachedTargets(e,t){const n={nanoErgs:void 0,tokens:void 0},r=dr(e,i=>i.value);if(t.nanoErgs&&t.nanoErgs>r&&(n.nanoErgs=t.nanoErgs-r),Ie(t.tokens))return n;for(const i of t.tokens){const s=Ye(e,i.tokenId);if(i.amount&&i.amount>s){if(i.tokenId===At(e).boxId)continue;ie(n.tokens)&&(n.tokens=[]),n.tokens.push({tokenId:i.tokenId,amount:i.amount-s})}}return n}ensureInclusion(e){if(typeof e=="function")this._ensureFilterPredicate=e;else if(e==="all")this._ensureFilterPredicate=t=>t.value>0n;else if(ie(this._ensureInclusionBoxIds)&&(this._ensureInclusionBoxIds=new Set),Array.isArray(e))for(const t of e)this._ensureInclusionBoxIds.add(t);else this._ensureInclusionBoxIds.add(e);return this}orderBy(e,t){return this._selector=e,this._sortDirection=t,this}_isISelectionStrategyImplementation(e){return!!e.select}static buildTargetFrom(e){const t={};let n=$;for(const r of e){n+=ce(r.value);for(const i of r.assets)t[i.tokenId]=(t[i.tokenId]||$)+ce(i.amount)}return{nanoErgs:n,tokens:Object.keys(t).map(r=>({tokenId:r,amount:t[r]}))}}},ec=class extends Error{constructor(e){super(`Box '${e}' is already included.`)}},tc=class extends Error{},nc=class extends Error{constructor(e){super(`Invalid Ergo address: ${e}`)}},rc=class extends Error{constructor(e){super(`Invalid input: ${e}`)}},ic=class extends Error{constructor(){super("Registers should be densely packed. This means that it's not possible to use a register like 'R7' without filling 'R6', 'R5' and 'R4', for example.")}},ei=class extends Error{constructor(e){super(`Malformed transaction: ${e}`)}},Mr=100,st,Li,Sr=(Li=class extends Or{constructor(t,n){super();M(this,st);q(t)&&this.add(t,n)}get minting(){if(x(this,st))return{...x(this,st).metadata,amount:this._items[x(this,st).index].amount}}_map(t){return{tokenId:t.tokenId,amount:ce(t.amount)}}_addOne(t,n){if((ie(n)||n.sum&&ie(n.index))&&this._sum(this._map(t)))return this.length;if(this._items.length>=Mr)throw new sc;return super._addOne(t,n),this.length}add(t,n){if(Array.isArray(t)){if(t.some(r=>!r.tokenId))throw new ln("TokenID is required.")}else if(!t.tokenId)throw new ln("TokenID is required.");return super.add(t,n)}mint(t){if(q(x(this,st)))throw new ln("Only one minting token is allowed per transaction.");const n=super.add({tokenId:t.tokenId,amount:t.amount});return P(this,st,{index:n-1,metadata:t}),this.length}_sum(t){for(const n of this._items)if(n.tokenId===t.tokenId)return n.amount+=t.amount,!0;return!1}remove(t,n){let r=-1;if(typeof t=="number"){if(this._isIndexOutOfBounds(t))throw new RangeError(`Index '${t}' is out of range.`);r=t}else if(r=this._items.findIndex(i=>i.tokenId===t),this._isIndexOutOfBounds(r))throw new Dr(`TokenId '${t}' not found in assets collection.`);if(n&&r>-1){const i=ce(n),s=this._items[r];if(i>s.amount)throw new tc("Insufficient token amount to perform a subtraction operation.");if(i<s.amount)return s.amount-=i,this.length}return this._items.splice(r,1),this.length}contains(t){return this._items.some(n=>n.tokenId===t)}toArray(t){if(this.minting){if(!t)throw new ac;return this._items.map(n=>({tokenId:n.tokenId?n.tokenId:t,amount:n.amount}))}return super.toArray()}},st=new WeakMap,Li),sc=class extends Error{constructor(){super(`A box must contain no more than ${Mr} distinct tokens.`)}},_s=class extends Error{constructor(){super("This transaction is trying to burn tokens. If that's your intention you must explicitly allow token burning on TransactionBuilder.configure() method. If no, a change address should be provided.")}},Dr=class extends Error{},oc=class extends Error{constructor(){super("Minting context is undefined. Transaction's inputs must be included in order to determine minting token id.")}},ac=class extends Error{constructor(){super("Creation Height is undefined.")}},dn=4,cc=32;function Is(e){return At(e)&240}function Bs(e){return At(e)&15}function Tr(e){return{head:e.subarray(0,1),body:e.subarray(1,e.length-dn),checksum:e.subarray(e.length-dn,e.length),network:Is(e),type:Bs(e)}}function ti(e,t,n){return new qn(1+n.length+dn).write(e+t).writeBytes(n).writeChecksum(dn).encode(Pt)}function ks(e){const t=gr(e.head,e.body);if(Ie(e.body)||e.type===Ee.P2PK&&!ss(e.body))return!1;const n=Qt(t).subarray(0,dn);return mo(n,e.checksum)}function lc(e){return ks(Tr(Pt.decode(e)))}var xr=de.decode("0008cd"),uc=36,Rs=de.decode("d40801"),Fn=de.decode("00ea02d193b4cbe4e3010e040004300e18"),fc=44,_n=24;function hc(e){return e.length===uc&&Gr(e,xr)?Ee.P2PK:e.length===fc&&Gr(e,Fn)&&po(e,Rs)?Ee.P2SH:Ee.P2S}var qe,ot,Lt,bn,oe,_r,Yt=(oe=class{constructor(t,n=Sn.Mainnet){M(this,qe);M(this,ot);M(this,Lt);P(this,qe,t),P(this,ot,n),P(this,Lt,hc(t))}get network(){return x(this,ot)}get ergoTree(){return de.encode(x(this,qe))}get type(){return x(this,Lt)}static fromErgoTree(t,n){return new oe(He(t),n)}static fromPublicKey(t,n){const r=He(t);if(!ss(r))throw new Error("The Public Key is invalid.");const i=gr(xr,r);return new oe(i,n)}static fromHash(t,n){let r=He(t);if(r.length===cc)r=r.subarray(0,_n);else if(r.length!==_n)throw Error(`Invalid hash length: ${r.length}`);const i=gr(Fn,r,Rs);return new oe(i,n)}static decode(t){var i;const n=Pt.decode(t),r=Tr(n);if(!ks(r))throw new nc(t);return Pe(i=oe,bn,_r).call(i,r)}static decodeUnsafe(t){var n;return Pe(n=oe,bn,_r).call(n,Tr(Pt.decode(t)))}static fromBase58(t,n=!1){return n?oe.decodeUnsafe(t):oe.decode(t)}static validate(t){return lc(t)}static getNetworkType(t){return Is(Pt.decode(t))}static getAddressType(t){return Bs(Pt.decode(t))}getPublicKeys(){return this.type===Ee.P2PK?[x(this,qe).subarray(xr.length)]:[]}toP2SH(t){if(this.type===Ee.P2SH)return this.encode();const n=Qt(x(this,qe)).subarray(0,_n);return ti(t??x(this,ot),Ee.P2SH,n)}encode(t){let n;return this.type===Ee.P2PK?n=At(this.getPublicKeys()):this.type===Ee.P2SH?n=x(this,qe).subarray(Fn.length,Fn.length+_n):n=x(this,qe),ti(t??x(this,ot),x(this,Lt),n)}toString(t){return this.encode(t??x(this,ot))}},qe=new WeakMap,ot=new WeakMap,Lt=new WeakMap,bn=new WeakSet,_r=function(t){switch(t.type){case Ee.P2PK:return oe.fromPublicKey(t.body,t.network);case Ee.P2SH:return oe.fromHash(t.body,t.network);case Ee.ADH:throw new Error("Invalid address type");default:return new oe(t.body,t.network)}},M(oe,bn),oe),Mn=class{constructor(e,t){J(this,"value");J(this,"ergoTree");J(this,"creationHeight");J(this,"assets");J(this,"additionalRegisters");J(this,"flags");this.ergoTree=e.ergoTree,this.creationHeight=e.creationHeight,this.value=ce(e.value),this.assets=e.assets.map(n=>({tokenId:n.tokenId,amount:ce(n.amount)})),this.additionalRegisters=e.additionalRegisters,this.flags=t}toBox(e,t){return new As(this,e,t)}toPlainObject(){return{value:this.value.toString(),ergoTree:this.ergoTree,creationHeight:this.creationHeight,assets:this.assets.map(e=>({tokenId:e.tokenId,amount:e.amount.toString()})),additionalRegisters:this.additionalRegisters}}},ye,Et,Ut,Ht,jt,As=(jt=class{constructor(t,n,r){M(this,ye);M(this,Et);M(this,Ut);M(this,Ht);if(dc(t))P(this,ye,new Mn(t)),P(this,Ut,t.transactionId),P(this,Ht,t.index),P(this,Et,t.boxId);else{if(!n||ie(r))throw new ln("TransactionId and Index must be provided for Box generation.");P(this,ye,t instanceof Mn?t:new Mn(t)),P(this,Ut,n),P(this,Ht,r)}}get value(){return x(this,ye).value}get ergoTree(){return x(this,ye).ergoTree}get creationHeight(){return x(this,ye).creationHeight}get assets(){return x(this,ye).assets}get additionalRegisters(){return x(this,ye).additionalRegisters}get boxId(){return x(this,Et)||P(this,Et,de.encode(Qt(vr(this).toBytes()))),x(this,Et)}get transactionId(){return x(this,Ut)}get index(){return x(this,Ht)}get change(){var t;return!!((t=x(this,ye).flags)!=null&&t.change)}toPlainObject(t){return t==="minimal"?{boxId:this.boxId}:{boxId:this.boxId,...x(this,ye).toPlainObject(),transactionId:this.transactionId,index:this.index}}toCandidate(){return x(this,ye)}isValid(){return jt.validate(this)}static validate(t){const n=vr(t).toBytes(),r=de.encode(Qt(n));return t.boxId===r}},ye=new WeakMap,Et=new WeakMap,Ut=new WeakMap,Ht=new WeakMap,jt);function dc(e){const t=e;return!!t.boxId&&!!t.transactionId&&q(t.index)}var wn,Ui,ni=(Ui=class extends As{constructor(t){super(t);M(this,wn);t.extension&&this.setContextExtension(t.extension)}get extension(){return x(this,wn)||{}}setContextExtension(t){const n={};for(const r in t){const i=t[r];i&&(n[r]=typeof i=="string"?i:i.toHex())}return P(this,wn,n),this}setContextVars(t){return this.setContextExtension(t)}toPlainObject(t){return{...super.toPlainObject(t),extension:this.extension}}toDataInputPlainObject(t){return super.toPlainObject(t)}},wn=new WeakMap,Ui),Vt,Hi,ri=(Hi=class{constructor(e){M(this,Vt);P(this,Vt,e)}first(){return x(this,Vt)}toArray(){let e=x(this,Vt);const t=[e];for(;e.child;)t.push(e.child),e=e.child;return t}toEIP12Object(){return this.toArray().map(e=>e.toEIP12Object())}toPlainObject(){return this.toArray().map(e=>e.toPlainObject())}},Vt=new WeakMap,Hi),yn,En,at,vt,zt,$t,Gt,De,ji,gc=(ji=class{constructor(e,t,n,r){M(this,yn);M(this,En);M(this,at);M(this,vt);M(this,zt);M(this,$t);M(this,Gt);M(this,De);P(this,yn,e),P(this,En,t),P(this,at,n),P(this,De,r)}get id(){return x(this,Gt)||P(this,Gt,de.encode(Qt(this.toBytes()))),x(this,Gt)}get inputs(){return x(this,yn)}get dataInputs(){return x(this,En)}get outputs(){return x(this,zt)||P(this,zt,x(this,at).map((e,t)=>e.toBox(this.id,t))),x(this,zt)}get change(){return x(this,$t)||P(this,$t,this.outputs.filter(e=>e.change)),x(this,$t)}get burning(){const e=Pn(Ye(this.inputs),Ye(x(this,at)));return e.tokens.length>0&&(e.tokens=e.tokens.filter(t=>t.tokenId!==this.inputs[0].boxId)),e}get child(){return x(this,vt)}chain(e){if(!x(this,De))throw new ln("Cannot chain transactions without a parent TransactionBuilder");const t=x(this,De).creationHeight,n=new oi(t).from(this.change);x(this,De).fee&&n.payFee(x(this,De).fee),x(this,De).changeAddress&&n.sendChangeTo(x(this,De).changeAddress);const r=e(n,this);return r instanceof oi?P(this,vt,r.build()):r instanceof ri?P(this,vt,r.first()):P(this,vt,r),new ri(this)}toPlainObject(e){return{inputs:this.inputs.map(t=>t.toPlainObject(e??"minimal")),dataInputs:this.dataInputs.map(t=>t.toDataInputPlainObject(e??"minimal")),outputs:x(this,at).map(t=>t.toPlainObject())}}toEIP12Object(){return this.toPlainObject("EIP-12")}toBytes(){return Ga({inputs:this.inputs,dataInputs:this.dataInputs,outputs:x(this,at)}).toBytes()}},yn=new WeakMap,En=new WeakMap,at=new WeakMap,vt=new WeakMap,zt=new WeakMap,$t=new WeakMap,Gt=new WeakMap,De=new WeakMap,ji),ii=class extends Or{constructor(e){super(),q(e)&&this.add(e)}_map(e){return e instanceof ni?e:new ni(e)}_addOne(e){if(this._items.some(t=>t.boxId===e.boxId))throw new ec(e.boxId);return super._addOne(e)}remove(e){let t=-1;if(typeof e=="number"){if(this._isIndexOutOfBounds(e))throw new RangeError(`Index '${e}' is out of range.`);t=e}else if(t=this._items.findIndex(n=>n.boxId===e),this._isIndexOutOfBounds(t))throw new Dr("The input you are trying to remove is not present in the inputs collection.");return this._items.splice(t,1),this.length}};function si(e,t,n){return e.set(t,(e.get(t)||$)+n)}var mc=class Cs extends Or{constructor(t){super(),q(t)&&this.add(t)}_map(t){return t}remove(t){let n=-1;if(typeof t=="number"){if(this._isIndexOutOfBounds(t))throw new RangeError(`Index '${t}' is out of range.`);n=t}else if(n=this._items.lastIndexOf(t),this._isIndexOutOfBounds(n))throw new Dr("The output you are trying to remove is not present in the outputs collection.");return this._items.splice(n,1),this.length}clone(){return new Cs(this._items)}sum(t){const n=new Map;let r=$;if(t&&(t.nanoErgs&&(r=t.nanoErgs),fe(t.tokens)))for(const i of t.tokens)ie(i.amount)||si(n,i.tokenId,i.amount);for(const i of this._items){r+=i.value;for(const s of i.assets)s.tokenId&&si(n,s.tokenId,s.amount)}return{nanoErgs:r,tokens:Array.from(n,([i,s])=>({tokenId:i,amount:s}))}}},pc=7,St,vn,Vi,bc=(Vi=class{constructor(e,t){M(this,St);M(this,vn);typeof e=="string"?P(this,St,de.decode(e)):P(this,St,e),P(this,vn,t??Sn.Mainnet)}get header(){return x(this,St)[0]}get version(){return this.header&pc}get hasSegregatedConstants(){return(this.header&qr.constantSegregation)!==0}get hasSize(){return(this.header&qr.sizeInclusion)!==0}toBytes(){return x(this,St)}toHex(){return de.encode(this.toBytes())}toAddress(e){return Yt.fromErgoTree(this.toHex(),e??x(this,vn))}encode(e){return this.toAddress(e).encode()}},St=new WeakMap,vn=new WeakMap,Vi),Ns=BigInt(360),Ps=BigInt(1e6);function wc(e=Ns){return t=>BigInt(t.estimateSize())*e}var yc="0000000000000000000000000000000000000000000000000000000000000000",ct,Xe,Wt,Tt,xt,qt,lt,zi,ar=(zi=class{constructor(e,t,n){M(this,ct);M(this,Xe);M(this,Wt);M(this,Tt);M(this,xt);M(this,qt);M(this,lt,{change:!1});this.setValue(e),P(this,xt,n),P(this,Xe,new Sr),P(this,qt,{}),P(this,lt,{change:!1}),typeof t=="string"?P(this,ct,Ki(t)?Yt.fromErgoTree(t):Yt.fromBase58(t)):t instanceof bc?P(this,ct,t.toAddress()):P(this,ct,t)}get value(){return q(x(this,Tt))?x(this,Tt).call(this,this):x(this,Wt)}get address(){return x(this,ct)}get ergoTree(){return x(this,ct).ergoTree}get creationHeight(){return x(this,xt)}get assets(){return x(this,Xe)}get additionalRegisters(){return x(this,qt)}get minting(){return this.assets.minting}get flags(){return x(this,lt)}setValue(e){if(typeof e=="function")P(this,Tt,e);else if(P(this,Wt,ce(e)),P(this,Tt,void 0),x(this,Wt)<=$)throw new Error("An UTxO cannot be created without a minimum required amount.");return this}setFlags(e){return P(this,lt,{...x(this,lt),...e}),this}addTokens(e,t){return e instanceof Sr?x(this,Xe).add(e.toArray(),t):x(this,Xe).add(e,t),this}addNfts(...e){const t=e.map(n=>({tokenId:n,amount:It}));return this.addTokens(t)}mintToken(e){return this.assets.mint(e),this}setCreationHeight(e,t){return(ie(t)||t.replace===!0||t.replace===!1&&ie(x(this,xt)))&&P(this,xt,e),this}setAdditionalRegisters(e){const t={};for(const n in e){const r=e[n];r&&(t[n]=typeof r=="string"?r:r.toHex())}if(!yo(t))throw new ic;return P(this,qt,t),this}eject(e){return e({tokens:x(this,Xe)}),this}build(e){var n,r;let t;if(this.minting){const i=e?(n=e[0])==null?void 0:n.boxId:void 0;t=this.assets.toArray(i),Ie(this.additionalRegisters)&&this.setAdditionalRegisters({R4:or(sr,nr.decode(this.minting.name||"")),R5:or(sr,nr.decode(this.minting.description||"")),R6:or(sr,nr.decode(((r=this.minting.decimals)==null?void 0:r.toString())||"0"))})}else t=this.assets.toArray();if(ie(this.creationHeight))throw new oc;return new Mn({value:this.value,ergoTree:this.ergoTree,creationHeight:this.creationHeight,assets:t,additionalRegisters:this.additionalRegisters},x(this,lt))}estimateSize(e=Ps){je(!!this.creationHeight,"Creation height must be set");const t={value:e,ergoTree:this.ergoTree,creationHeight:this.creationHeight,assets:x(this,Xe).toArray(yc),additionalRegisters:this.additionalRegisters};return $a(t)}},ct=new WeakMap,Xe=new WeakMap,Wt=new WeakMap,Tt=new WeakMap,xt=new WeakMap,qt=new WeakMap,lt=new WeakMap,zi),Ec=class extends Error{};function vc(e){return{addInputs:t=>e.from(t,{ensureInclusion:!0}).inputs.length,addOutputs:(t,n)=>e.to(t,n).outputs.length,addDataInputs:(t,n)=>e.withDataFrom(t,n).dataInputs.length,burnTokens:t=>{if(!e.settings.canBurnTokensFromPlugins)throw new _s;e.burnTokens(t)},setFee:t=>e.payFee(t)}}var Sc=class{constructor(){J(this,"_maxDistinctTokensPerChangeBox");J(this,"_allowTokenBurning");J(this,"_allowTokenBurningFromPlugins");J(this,"_isolateErgOnChange");this._maxDistinctTokensPerChangeBox=Mr,this._allowTokenBurning=!1,this._allowTokenBurningFromPlugins=!1,this._isolateErgOnChange=!1}get maxTokensPerChangeBox(){return this._maxDistinctTokensPerChangeBox}get canBurnTokens(){return this._allowTokenBurning}get canBurnTokensFromPlugins(){return this.canBurnTokens||this._allowTokenBurningFromPlugins}get shouldIsolateErgOnChange(){return this._isolateErgOnChange}setMaxTokensPerChangeBox(e){return this._maxDistinctTokensPerChangeBox=e,this}allowTokenBurning(e=!0){return this._allowTokenBurning=e,this}allowTokenBurningFromPlugins(e=!0){return this._allowTokenBurningFromPlugins=e,this}isolateErgOnChange(e=!0){return this._isolateErgOnChange=e,this}},Tc=BigInt(11e5),Os="1005040004000e36100204a00b08cd0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798ea02d192a39a8cc7a701730073011001020402d19683030193a38cc7b2a57300000193c2b2a57301007473027303830108cdeeac93b1a57304",Xt,Kt,Ke,ut,_e,Qe,ft,Re,_t,Ae,ht,ge,Fs,Ir,Ms,Ds,Ls,Us,$i,oi=($i=class{constructor(e){M(this,ge);M(this,Xt);M(this,Kt);M(this,Ke);M(this,ut);M(this,_e);M(this,Qe);M(this,ft);M(this,Re);M(this,_t);M(this,Ae);M(this,ht);P(this,Xt,new ii),P(this,Kt,new ii),P(this,Ke,new mc),P(this,ut,new Sc),P(this,_e,e)}get inputs(){return x(this,Xt)}get dataInputs(){return x(this,Kt)}get outputs(){return x(this,Ke)}get changeAddress(){return x(this,Re)}get fee(){return x(this,_t)}get burning(){return x(this,Ae)}get settings(){return x(this,ut)}get creationHeight(){return x(this,_e)}get and(){return this}atHeight(e){return P(this,_e,e),this}from(e,t={ensureInclusion:!1}){const n=xc(e)?e.toArray():e;return t.ensureInclusion&&Pe(this,ge,Fs).call(this,n),x(this,Xt).add(n),this}to(e,t){return x(this,Ke).add(e,t),this}withDataFrom(e,t){return x(this,Kt).add(e,t),this}sendChangeTo(e){return typeof e=="string"?P(this,Re,Ki(e)?Yt.fromErgoTree(e,Sn.Mainnet):Yt.fromBase58(e)):P(this,Re,e),this}payFee(e){return P(this,_t,ce(e)),this}payMinFee(){return this.payFee(Tc),this}burnTokens(e){return x(this,Ae)||P(this,Ae,new Sr),x(this,Ae).add(e),this}configure(e){return e(x(this,ut)),this}configureSelector(e){return ie(x(this,ft))&&P(this,ft,[]),x(this,ft).push(e),this}extend(e){return x(this,ht)||P(this,ht,[]),x(this,ht).push({execute:e,pending:!0}),this}eject(e){return e({inputs:this.inputs,dataInputs:this.dataInputs,outputs:this.outputs,burning:this.burning,settings:this.settings,selection:t=>{this.configureSelector(t)}}),this}build(){var l;if(fe(x(this,ht))){const g=vc(this);for(const a of x(this,ht))a.pending&&(a.execute(g),a.pending=!1)}if(Pe(this,ge,Ms).call(this)){if(Pe(this,ge,Ls).call(this))throw new ei("only one token can be minted per transaction.");if(Pe(this,ge,Us).call(this))throw new Ec("EIP-4 tokens cannot be minted from outside of the minting box.")}this.outputs.toArray().map(g=>g.setCreationHeight(x(this,_e),{replace:!1}));const e=this.outputs.clone();q(x(this,_t))&&e.add(new ar(x(this,_t),Os));const t=new Za(this.inputs.toArray());if((l=x(this,Qe))!=null&&l.size&&t.ensureInclusion(Array.from(x(this,Qe))),fe(x(this,ft)))for(const g of x(this,ft))g(t);const n=fe(x(this,Ae))?e.sum({tokens:x(this,Ae).toArray()}):e.sum();let r=t.select(n);if(q(x(this,Re))){const g=[],a=r[0].boxId,f=n.tokens.some(b=>b.tokenId===a)?a:void 0;f&&(n.tokens=n.tokens.filter(b=>b.tokenId!==f));let h=Pn(Ye(r),n);if(fe(h.tokens)){let b=ai({changeAddress:x(this,Re),creationHeight:x(this,_e),tokens:h.tokens,maxTokensPerBox:this.settings.maxTokensPerChangeBox,baseIndex:this.outputs.length+1});for(;b>h.nanoErgs;)r=t.select({nanoErgs:n.nanoErgs+b,tokens:n.tokens}),h=Pn(Ye(r),n),b=ai({changeAddress:x(this,Re),creationHeight:x(this,_e),tokens:h.tokens,maxTokensPerBox:this.settings.maxTokensPerChangeBox,baseIndex:this.outputs.length+1});const m=ho(h.tokens,x(this,ut).maxTokensPerChangeBox);for(const T of m){const k=new ar(wc(),x(this,Re)).setCreationHeight(x(this,_e)).addTokens(T).setFlags({change:!0});h.nanoErgs-=k.value,g.push(k)}}if(h.nanoErgs>$)if(!g.length||this.settings.shouldIsolateErgOnChange)g.unshift(new ar(h.nanoErgs,x(this,Re)).setCreationHeight(x(this,_e)).setFlags({change:!0}));else{const b=At(g);b.setValue(b.value+h.nanoErgs)}e.add(g)}for(const g of r)if(!g.isValid())throw new rc(g.boxId);const i=e.toArray().map(g=>g.setCreationHeight(x(this,_e),{replace:!1}).build(r)),s=new gc(r,this.dataInputs.toArray(),i,this);let o=s.burning;if(o.nanoErgs>$)throw new ei("it's not possible to burn ERG.");if(fe(o.tokens)&&fe(x(this,Ae))&&(o=Pn(o,{nanoErgs:$,tokens:x(this,Ae).toArray()})),!x(this,ut).canBurnTokens&&fe(o.tokens))throw new _s;return s}},Xt=new WeakMap,Kt=new WeakMap,Ke=new WeakMap,ut=new WeakMap,_e=new WeakMap,Qe=new WeakMap,ft=new WeakMap,Re=new WeakMap,_t=new WeakMap,Ae=new WeakMap,ht=new WeakMap,ge=new WeakSet,Fs=function(e){if(x(this,Qe)||P(this,Qe,new Set),Array.isArray(e))for(const t of e)x(this,Qe).add(t.boxId);else x(this,Qe).add(e.boxId)},Ir=function(){for(const e of x(this,Ke))if(e.minting)return e},Ms=function(){return Pe(this,ge,Ir).call(this)!==void 0},Ds=function(){var e,t;return(t=(e=Pe(this,ge,Ir).call(this))==null?void 0:e.minting)==null?void 0:t.tokenId},Ls=function(){let e=0;for(const t of x(this,Ke))if(t.minting&&(e++,e>1))return!0;return!1},Us=function(){const e=Pe(this,ge,Ds).call(this);if(ie(e))return!1;let t=0;for(const n of x(this,Ke))if(n.assets.contains(e)&&(t++,t>1))return!0;return!1},$i);function xc(e){return e.toArray!==void 0}function ai(e){return BigInt(_c(e))*Ns}function _c({changeAddress:e,creationHeight:t,tokens:n,baseIndex:r,maxTokensPerBox:i}){const s=Math.ceil(n.length/i);let o=0;o+=ue(Ps),o+=cn(e.ergoTree),o+=ue(t),o+=ue(0),o+=32,o=o*s;for(let l=0;l<s;l++)o+=ue(r+l);for(const l of n)o+=cn(l.tokenId)+ue(l.amount);return n.length>i?n.length%i>0?(o+=ue(i)*Math.floor(n.length/i),o+=ue(n.length%i)):o+=ue(i)*s:o+=ue(n.length),o}Sn.Mainnet;function Hn(e){if(typeof e=="bigint")return e;if(typeof e=="string")try{return BigInt(e)}catch{return console.error("asBigInt"+e),0n}else if(typeof e=="number")return BigInt(e);return 0n}function Ic(e){return e.reduce((t,n)=>Hn(t)+Hn(n.value),0n)}function Bc(e,t){const n=e.find(r=>r.tokenId==t.tokenId);return n?n.amount=Hn(n.amount)+Hn(t.amount):e.push(t),e}const kc="0000000000000000000000000000000000000000000000000000000000000000",bu="03faf2cb329f2e90d6d23b58d91bbb6c046aa143261cc21f52fbe2824bfcbf04",wu="003bd19d0187117f130b62e1bcab0939929ff5c7709f843c5c4dd158949285d0",jn=j(!1),Ue=j(""),fn=j([]),Hs=j(""),Rc=j([]),ci=j([]);async function Vn(){if(U(Ue))try{const e=await ergo.get_utxos(),t=e.flatMap(r=>r.assets).reduce(Bc,[]).map(r=>(r.amount=BigInt(r.amount),r)),n=Ic(e);n>0?ci.set([{tokenId:kc,amount:n},...t]):ci.set(t);try{const r=await ergo.get_used_addresses();fn.set(r);const i=await ergo.get_change_address();Hs.set(i)}catch(r){console.error(r)}}catch(e){console.warn(`Failed to load ${U(Ue)} balance.`),console.error(e)}}async function Ac(){var t,n,r;const e=localStorage.getItem("ui_web3wallet_wallet_name");e&&Ue.set(e),window.ergoConnector&&(Rc.set(Object.keys(window.ergoConnector)),U(Ue)?(t=window.ergoConnector[U(Ue)])!=null&&t.isConnected&&(await((n=window.ergoConnector[U(Ue)])==null?void 0:n.connect()),jn.set(!0),await Vn()):await((r=window.ergoConnector[U(Ue)])==null?void 0:r.connect())?(jn.set(!0),await Vn()):console.warn("Wallet reconnect failed"))}async function yu(){await window.ergoConnector[U(Ue)].disconnect(),jn.set(!1),Ue.set(""),fn.set([]),Hs.set(""),localStorage.removeItem("ui_web3wallet_wallet_name")}async function Eu(e=""){const t=window.ergoConnector?Object.keys(window.ergoConnector):[];t.length>0&&(await window.ergoConnector[t[0]].connect()?(jn.set(!0),Ue.set(t[0]),localStorage.setItem("ui_web3wallet_wallet_name",t[0]),await Vn()):console.warn(`Connecting ${t[0]} failed.`))}async function vu(){await Ac()}Array.from({length:50},()=>({price:69001.34,amount:1.302628,time:"20:20:12",side:Math.random()<.5?"BUY":"SELL"}));var hn=e=>typeof e=="function"?e:function(){return e},Cc=typeof self<"u"?self:null,an=typeof window<"u"?window:null,Rt=Cc||an||Rt,Nc="2.0.0",Le={connecting:0,open:1,closing:2,closed:3},Pc=1e4,Oc=1e3,we={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},We={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},Br={longpoll:"longpoll",websocket:"websocket"},Fc={complete:4},In=class{constructor(e,t,n,r){this.channel=e,this.event=t,this.payload=n||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,_ref:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}},js=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},Mc=class{constructor(e,t,n){this.state=we.closed,this.topic=e,this.params=hn(t||{}),this.socket=n,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new In(this,We.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new js(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=we.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=we.closed,this.socket.remove(this)}),this.onError(r=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,r),this.isJoining()&&this.joinPush.reset(),this.state=we.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new In(this,We.leave,hn({}),this.timeout).send(),this.state=we.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(We.reply,(r,i)=>{this.trigger(this.replyEventName(i),r)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(We.close,e)}onError(e){return this.on(We.error,t=>e(t))}on(e,t){let n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}off(e,t){this.bindings=this.bindings.filter(n=>!(n.event===e&&(typeof t>"u"||t===n.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let r=new In(this,e,function(){return t},n);return this.canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=we.leaving;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(We.close,"leave")},n=new In(this,We.leave,hn({}),e);return n.receive("ok",()=>t()).receive("timeout",()=>t()),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isMember(e,t,n,r){return this.topic!==e?!1:r&&r!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:r}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(e))}trigger(e,t,n,r){let i=this.onMessage(e,t,n,r);if(t&&!i)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let s=this.bindings.filter(o=>o.event===e);for(let o=0;o<s.length;o++)s[o].callback(i,n,r||this.joinRef())}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===we.closed}isErrored(){return this.state===we.errored}isJoined(){return this.state===we.joined}isJoining(){return this.state===we.joining}isLeaving(){return this.state===we.leaving}},zn=class{static request(e,t,n,r,i,s,o){if(Rt.XDomainRequest){let l=new Rt.XDomainRequest;return this.xdomainRequest(l,e,t,r,i,s,o)}else{let l=new Rt.XMLHttpRequest;return this.xhrRequest(l,e,t,n,r,i,s,o)}}static xdomainRequest(e,t,n,r,i,s,o){return e.timeout=i,e.open(t,n),e.onload=()=>{let l=this.parseJSON(e.responseText);o&&o(l)},s&&(e.ontimeout=s),e.onprogress=()=>{},e.send(r),e}static xhrRequest(e,t,n,r,i,s,o,l){return e.open(t,n,!0),e.timeout=s,e.setRequestHeader("Content-Type",r),e.onerror=()=>l&&l(null),e.onreadystatechange=()=>{if(e.readyState===Fc.complete&&l){let g=this.parseJSON(e.responseText);l(g)}},o&&(e.ontimeout=o),e.send(i),e}static parseJSON(e){if(!e||e==="")return null;try{return JSON.parse(e)}catch{return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let n=[];for(var r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let i=t?`${t}[${r}]`:r,s=e[r];typeof s=="object"?n.push(this.serialize(s,i)):n.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}return n.join("&")}static appendParams(e,t){if(Object.keys(t).length===0)return e;let n=e.match(/\?/)?"&":"?";return`${e}${n}${this.serialize(t)}`}},Dc=e=>{let t="",n=new Uint8Array(e),r=n.byteLength;for(let i=0;i<r;i++)t+=String.fromCharCode(n[i]);return btoa(t)},nn=class{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=Le.connecting,setTimeout(()=>this.poll(),0)}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Br.websocket),"$1/"+Br.longpoll)}endpointURL(){return zn.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,t,n){this.close(e,t,n),this.readyState=Le.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===Le.open||this.readyState===Le.connecting}poll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),e=>{if(e){var{status:t,token:n,messages:r}=e;this.token=n}else t=0;switch(t){case 200:r.forEach(i=>{setTimeout(()=>this.onmessage({data:i}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=Le.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${t}`)}})}send(e){typeof e!="string"&&(e=Dc(e)),this.currentBatch?this.currentBatch.push(e):this.awaitingBatchAck?this.batchBuffer.push(e):(this.currentBatch=[e],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0))}batchSend(e){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",e.join(`
`),()=>this.onerror("timeout"),t=>{this.awaitingBatchAck=!1,!t||t.status!==200?(this.onerror(t&&t.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(e,t,n){for(let i of this.reqs)i.abort();this.readyState=Le.closed;let r=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:t,wasClean:n});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent<"u"?this.onclose(new CloseEvent("close",r)):this.onclose(r)}ajax(e,t,n,r,i){let s,o=()=>{this.reqs.delete(s),r()};s=zn.request(e,this.endpointURL(),t,n,this.timeout,o,l=>{this.reqs.delete(s),this.isActive()&&i(l)}),this.reqs.add(s)}},Bn={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[n,r,i,s,o]=JSON.parse(e);return t({join_ref:n,ref:r,topic:i,event:s,payload:o})}},binaryEncode(e){let{join_ref:t,ref:n,event:r,topic:i,payload:s}=e,o=this.META_LENGTH+t.length+n.length+i.length+r.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),g=new DataView(l),a=0;g.setUint8(a++,this.KINDS.push),g.setUint8(a++,t.length),g.setUint8(a++,n.length),g.setUint8(a++,i.length),g.setUint8(a++,r.length),Array.from(t,h=>g.setUint8(a++,h.charCodeAt(0))),Array.from(n,h=>g.setUint8(a++,h.charCodeAt(0))),Array.from(i,h=>g.setUint8(a++,h.charCodeAt(0))),Array.from(r,h=>g.setUint8(a++,h.charCodeAt(0)));var f=new Uint8Array(l.byteLength+s.byteLength);return f.set(new Uint8Array(l),0),f.set(new Uint8Array(s),l.byteLength),f.buffer},binaryDecode(e){let t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,r);case this.KINDS.reply:return this.decodeReply(e,t,r);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,r)}},decodePush(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),s=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=n.decode(e.slice(o,o+r));o=o+r;let g=n.decode(e.slice(o,o+i));o=o+i;let a=n.decode(e.slice(o,o+s));o=o+s;let f=e.slice(o,e.byteLength);return{join_ref:l,ref:null,topic:g,event:a,payload:f}},decodeReply(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,g=n.decode(e.slice(l,l+r));l=l+r;let a=n.decode(e.slice(l,l+i));l=l+i;let f=n.decode(e.slice(l,l+s));l=l+s;let h=n.decode(e.slice(l,l+o));l=l+o;let b=e.slice(l,e.byteLength),m={status:h,response:b};return{join_ref:g,ref:a,topic:f,event:We.reply,payload:m}},decodeBroadcast(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),s=this.HEADER_LENGTH+2,o=n.decode(e.slice(s,s+r));s=s+r;let l=n.decode(e.slice(s,s+i));s=s+i;let g=e.slice(s,e.byteLength);return{join_ref:null,ref:null,topic:o,event:l,payload:g}}},Lc=class{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||Pc,this.transport=t.transport||Rt.WebSocket||nn,this.primaryPassedHealthCheck=!1,this.longPollFallbackMs=t.longPollFallbackMs,this.fallbackTimer=null,this.sessionStore=t.sessionStorage||Rt&&Rt.sessionStorage,this.establishedConnections=0,this.defaultEncoder=Bn.encode.bind(Bn),this.defaultDecoder=Bn.decode.bind(Bn),this.closeWasClean=!1,this.binaryType=t.binaryType||"arraybuffer",this.connectClock=1,this.transport!==nn?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let n=null;an&&an.addEventListener&&(an.addEventListener("pagehide",r=>{this.conn&&(this.disconnect(),n=this.connectClock)}),an.addEventListener("pageshow",r=>{n===this.connectClock&&(n=null,this.connect())})),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=r=>t.rejoinAfterMs?t.rejoinAfterMs(r):[1e3,2e3,5e3][r-1]||1e4,this.reconnectAfterMs=r=>t.reconnectAfterMs?t.reconnectAfterMs(r):[10,50,100,150,200,250,500,1e3,2e3][r-1]||5e3,this.logger=t.logger||null,!this.logger&&t.debug&&(this.logger=(r,i,s)=>{console.log(`${r}: ${i}`,s)}),this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=hn(t.params||{}),this.endPoint=`${e}/${Br.websocket}`,this.vsn=t.vsn||Nc,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new js(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return nn}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=zn.appendParams(zn.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return e.charAt(0)!=="/"?e:e.charAt(1)==="/"?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,n){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.teardown(e,t,n)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=hn(e)),!this.conn&&(this.longPollFallbackMs&&this.transport!==nn?this.connectWithFallback(nn,this.longPollFallbackMs):this.transportConnect())}log(e,t,n){this.logger&&this.logger(e,t,n)}hasLogger(){return this.logger!==null}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}ping(e){if(!this.isConnected())return!1;let t=this.makeRef(),n=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t});let r=this.onMessage(i=>{i.ref===t&&(this.off([r]),e(Date.now()-n))});return!0}transportConnect(){this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=e=>this.onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this.onConnClose(e)}getSession(e){return this.sessionStore&&this.sessionStore.getItem(e)}storeSession(e,t){this.sessionStore&&this.sessionStore.setItem(e,t)}connectWithFallback(e,t=2500){clearTimeout(this.fallbackTimer);let n=!1,r=!0,i,s,o=l=>{this.log("transport",`falling back to ${e.name}...`,l),this.off([i,s]),r=!1,this.replaceTransport(e),this.transportConnect()};if(this.getSession(`phx:fallback:${e.name}`))return o("memorized");this.fallbackTimer=setTimeout(o,t),s=this.onError(l=>{this.log("transport","error",l),r&&!n&&(clearTimeout(this.fallbackTimer),o(l))}),this.onOpen(()=>{if(n=!0,!r)return this.primaryPassedHealthCheck||this.storeSession(`phx:fallback:${e.name}`,"true"),this.log("transport",`established ${e.name} fallback`);clearTimeout(this.fallbackTimer),this.fallbackTimer=setTimeout(o,t),this.ping(l=>{this.log("transport","connected to primary after",l),this.primaryPassedHealthCheck=!0,clearTimeout(this.fallbackTimer)})}),this.transportConnect()}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`${this.transport.name} connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),Oc,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,t,n){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(t?this.conn.close(t,n||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,t=1){if(t===5||!this.conn||!this.conn.bufferedAmount){e();return}setTimeout(()=>{this.waitForBufferDone(e,t+1)},150*t)}waitForSocketClosed(e,t=1){if(t===5||!this.conn||this.conn.readyState===Le.closed){e();return}setTimeout(()=>{this.waitForSocketClosed(e,t+1)},150*t)}onConnClose(e){let t=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&t!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,n])=>n(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let t=this.transport,n=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,r])=>{r(e,t,n)}),(t===this.transport||n>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(We.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case Le.connecting:return"connecting";case Le.open:return"open";case Le.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(t=>t!==e)}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(([n])=>e.indexOf(n)===-1)}channel(e,t={}){let n=new Mc(e,t,this);return this.channels.push(n),n}push(e){if(this.hasLogger()){let{topic:t,event:n,payload:r,ref:i,join_ref:s}=e;this.log("push",`${t} ${n} (${s}, ${i})`,r)}this.isConnected()?this.encode(e,t=>this.conn.send(t)):this.sendBuffer.push(()=>this.encode(e,t=>this.conn.send(t)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:i,ref:s,join_ref:o}=t;s&&s===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${i.status||""} ${n} ${r} ${s&&"("+s+")"||""}`,i);for(let l=0;l<this.channels.length;l++){const g=this.channels[l];g.isMember(n,r,i,o)&&g.trigger(r,i,s,o)}for(let l=0;l<this.stateChangeCallbacks.message.length;l++){let[,g]=this.stateChangeCallbacks.message[l];g(t)}})}leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n.isJoined()||n.isJoining()));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}};const kr="003bd19d0187117f130b62e1bcab0939929ff5c7709f843c5c4dd158949285d0",Rr="03faf2cb329f2e90d6d23b58d91bbb6c046aa143261cc21f52fbe2824bfcbf04",Su="7d672d1def471720ca5782fd6473e47e796d9ac0c138d9911346f118b2f6d9d9",Tu="MUbV38YgqHy7XbsoXWF5z7EZm524Ybdwe5p9WDrbhruZRtehkRPT92imXer2eTkjwPDfboa1pR3zb3deVKVq3H7Xt98qcTqLuSBSbHb7izzo5jphEpcnqyKJ2xhmpNPVvmtbdJNdvdopPrHHDBbAGGeW7XYTQwEeoRfosXzcDtiGgw97b2aqjTsNFmZk7khBEQywjYfmoDc9nUCJMZ3vbSspnYo3LarLe55mh2Np8MNJqUN9APA6XkhZCrTTDRZb1B4krgFY1sVMswg2ceqguZRvC9pqt3tUUxmSnB24N6dowfVJKhLXwHPbrkHViBv1AKAJTmEaQW2DN1fRmD9ypXxZk8GXmYtxTtrj3BiunQ4qzUCu1eGzxSREjpkFSi2ATLSSDqUwxtRz639sHM6Lav4axoJNPCHbY8pvuBKUxgnGRex8LEGM8DeEJwaJCaoy8dBw9Lz49nq5mSsXLeoC4xpTUmp47Bh7GAZtwkaNreCu74m9rcZ8Di4w1cmdsiK1NWuDh9pJ2Bv7u3EfcurHFVqCkT3P86JUbKnXeNxCypfrWsFuYNKYqmjsix82g9vWcGMmAcu5nagxD4iET86iE2tMMfZZ5vqZNvntQswJyQqv2Wc6MTh4jQx1q2qJZCQe4QdEK63meTGbZNNKMctHQbp3gRkZYNrBtxQyVtNLR8xEY8zGp85GeQKbb37vqLXxRpGiigAdMe3XZA4hhYPmAAU5hpSMYaRAjtvvMT3bNiHRACGrfjvSsEG9G2zY5in2YWz5X9zXQLGTYRsQ4uNFkYoQRCBdjNxGv6R58Xq74zCgt19TxYZ87gPWxkXpWwTaHogG1eps8WXt8QzwJ9rVx6Vu9a5GjtcGsQxHovWmYixgBU8X9fPNJ9UQhYyAWbjtRSuVBtDAmoV1gCBEPwnYVP5GCGhCocbwoYhZkZjFZy6ws4uxVLid3FxuvhWvQrVEDYp7WRvGXbNdCbcSXnbeTrPMey1WPaXX",yt="102a0400040004000e20011d3364de07e5a26f0c4eef0852cddb387039a921b7154ef3cab22c6eda887f0400040204020400040004020500050005c8010500050005feffffffffffffffff0105000580897a05000580897a040405c80104c0933805c00c0580a8d6b907050005c8010580dac40905000500040404040500050005a0060101050005a0060100040004000e20239c170b7e82f94e6b05416f14b8a2a57e0bfff0e3c93f4abbcd160b6a5b271ad801d601db6501fed1ec9591b172017300d821d602b27201730100d603938cb2db63087202730200017303d604b2a5730400d605c17204d606db6308a7d607b27206730500d6088c720702d609db63087204d60ab27209730600d60b8c720a02d60c947208720bd60db27206730700d60e8c720d02d60fb27209730800d6108c720f02d61194720e7210d612e4c6a70505d613e4c672040505d614e4c6a70405d615e4c672040405d616b2a5730900d617e4c672160405d61895720c730a7217d61995720c7217730bd61ac1a7d61be4c672160505d61c9de4c672020405730cd61da2a1721a9c7214721c730dd61e9572119ca1721c95937214730e730f9d721d72147218d801d61e99721a721d9c9593721e7310731195937212731273139d721e72127219d61f9d9c721e7e7314057315d6209c7215721cd6219591a3731673177318d62295937220731972219d9c7205731a7220edededed7203ededededed927205731b93c27204c2a7edec720c7211efed720c7211ed939a720872129a720b7213939a720e72149a72107215edededed939a721472187215939a721272197213939a721a721b7205927215731c927213731deded938c720f018c720d01938c720a018c720701938cb27209731e00018cb27206731f000193721b9a721e958f721f7320f0721f721f957211959172187321927222732273239591721973249072227221927222732572037326938cb2db6308b2a4732700732800017329",kn="1005040004000e36100204a00b08cd0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798ea02d192a39a8cc7a701730073011001020402d19683030193a38cc7b2a57300000193c2b2a57301007473027303830108cdeeac93b1a57304",xu="9eaX1P6KkckoZa2cc8Cn2iL3tjsUL5MN9CQCTPCE1GbcaZwcqns",Ot=1n,Ft=-1n;function li(e,t,n){const r=e.inputs.filter(s=>s.ergoTree===n).flatMap(s=>s.assets).filter(s=>s.tokenId===t).reduce((s,o)=>s+o.amount,0),i=e.outputs.filter(s=>s.ergoTree===n).flatMap(s=>s.assets).filter(s=>s.tokenId===t).reduce((s,o)=>s+o.amount,0);return{input:r,output:i,difference:i-r}}function cr(e,t){return{ergoTree:t,ergoStats:Vc(e,t),usdStats:li(e,Rr,t),rsvStats:li(e,kr,t)}}function ui(e,t,n){return e!=null&&e.outputs?e.outputs.filter(r=>!(n?n.includes(r.ergoTree):!1)):[]}function Uc(e,t,n){return e!=null&&e.inputs?e.inputs.filter(r=>!(n?n.includes(r.ergoTree):!1)):[]}function Rn(e,t){let n=0n;for(const r of e)if(r.assets&&Array.isArray(r.assets))for(const i of r.assets)i.tokenId===t&&(n+=BigInt(i.amount||0));return n}function An(e){let t=0n;for(const n of e)n.value&&(t+=BigInt(n.value||0));return t}function Hc(e){const t=new Set,n=new Set;if(e.inputs&&Array.isArray(e.inputs))for(const r of e.inputs)r.ergoTree&&t.add(r.ergoTree);if(e.outputs&&Array.isArray(e.outputs))for(const r of e.outputs)r.ergoTree&&n.add(r.ergoTree);return{inputsErgoTrees:Array.from(t),outputsErgoTrees:Array.from(n)}}function fi(e,t){const n=e.filter(r=>!t.includes(r));return n.length>0?n:[]}function jc(e,t){var a;let n,r,i,s,o,l,g;return((a=e.usdStats)==null?void 0:a.difference)!==0?(i="USD/ERG",s=e.usdStats.difference<0?"Buy":"Sell",o=-Vs(e.usdStats.difference)+" USD",n=(-(e.usdStats.difference/e.ergoStats.difference)*10**7).toFixed(2),r=0,g=(-(t.usdStats.difference/t.ergoStats.difference)*10**7).toFixed(2)):(i="RSV/ERG",s=e.rsvStats.difference<0?"Buy":"Sell",o=-e.rsvStats.difference+" RSV",r=(-(e.rsvStats.difference/e.ergoStats.difference)*10**9).toFixed(2),n=0,g=(-(t.rsvStats.difference/t.ergoStats.difference)*10**9).toFixed(2)),l=-Ar(e.ergoStats.difference)+" ERG",{pair:i,operation:s,amount:o,volume:l,priceContract:i=="USD/ERG"?n:r,price:g}}function Ar(e){return e?Number((e/10**9).toFixed(2)):0}function Vs(e){return e?Number((e/10**2).toFixed(2)):0}function Vc(e,t){const n=e.inputs.filter(i=>i.ergoTree===t).reduce((i,s)=>i+s.value,0),r=e.outputs.filter(i=>i.ergoTree===t).reduce((i,s)=>i+s.value,0);return{input:n,output:r,difference:r-n}}function zc(e,t,n,r){const i=Math.abs(r)*.05,s=[];for(const o of e)if(!t.includes(o)){const l=n.find(g=>g.ergoTree===o);l&&BigInt(l.value)<BigInt(Math.floor(i))&&(!l.assets||l.assets.length===0)&&s.push(o)}return s}var $c=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,lr=Math.ceil,Te=Math.floor,me="[BigNumber Error] ",hi=me+"Number primitive has more than 15 significant digits: ",Be=1e14,L=14,ur=9007199254740991,fr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],rt=1e7,re=1e9;function zs(e){var t,n,r,i=B.prototype={constructor:B,toString:null,valueOf:null},s=new B(1),o=20,l=4,g=-7,a=21,f=-1e7,h=1e7,b=!1,m=1,T=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",H=!0;function B(c,u){var d,v,w,y,I,p,E,_,S=this;if(!(S instanceof B))return new B(c,u);if(u==null){if(c&&c._isBigNumber===!0){S.s=c.s,!c.c||c.e>h?S.c=S.e=null:c.e<f?S.c=[S.e=0]:(S.e=c.e,S.c=c.c.slice());return}if((p=typeof c=="number")&&c*0==0){if(S.s=1/c<0?(c=-c,-1):1,c===~~c){for(y=0,I=c;I>=10;I/=10,y++);y>h?S.c=S.e=null:(S.e=y,S.c=[c]);return}_=String(c)}else{if(!$c.test(_=String(c)))return r(S,_,p);S.s=_.charCodeAt(0)==45?(_=_.slice(1),-1):1}(y=_.indexOf("."))>-1&&(_=_.replace(".","")),(I=_.search(/e/i))>0?(y<0&&(y=I),y+=+_.slice(I+1),_=_.substring(0,I)):y<0&&(y=_.length)}else{if(K(u,2,A.length,"Base"),u==10&&H)return S=new B(c),X(S,o+S.e+1,l);if(_=String(c),p=typeof c=="number"){if(c*0!=0)return r(S,_,p,u);if(S.s=1/c<0?(_=_.slice(1),-1):1,B.DEBUG&&_.replace(/^0\.0*|\./,"").length>15)throw Error(hi+c)}else S.s=_.charCodeAt(0)===45?(_=_.slice(1),-1):1;for(d=A.slice(0,u),y=I=0,E=_.length;I<E;I++)if(d.indexOf(v=_.charAt(I))<0){if(v=="."){if(I>y){y=E;continue}}else if(!w&&(_==_.toUpperCase()&&(_=_.toLowerCase())||_==_.toLowerCase()&&(_=_.toUpperCase()))){w=!0,I=-1,y=0;continue}return r(S,String(c),p,u)}p=!1,_=n(_,u,10,S.s),(y=_.indexOf("."))>-1?_=_.replace(".",""):y=_.length}for(I=0;_.charCodeAt(I)===48;I++);for(E=_.length;_.charCodeAt(--E)===48;);if(_=_.slice(I,++E)){if(E-=I,p&&B.DEBUG&&E>15&&(c>ur||c!==Te(c)))throw Error(hi+S.s*c);if((y=y-I-1)>h)S.c=S.e=null;else if(y<f)S.c=[S.e=0];else{if(S.e=y,S.c=[],I=(y+1)%L,y<0&&(I+=L),I<E){for(I&&S.c.push(+_.slice(0,I)),E-=L;I<E;)S.c.push(+_.slice(I,I+=L));I=L-(_=_.slice(I)).length}else I-=E;for(;I--;_+="0");S.c.push(+_)}}else S.c=[S.e=0]}B.clone=zs,B.ROUND_UP=0,B.ROUND_DOWN=1,B.ROUND_CEIL=2,B.ROUND_FLOOR=3,B.ROUND_HALF_UP=4,B.ROUND_HALF_DOWN=5,B.ROUND_HALF_EVEN=6,B.ROUND_HALF_CEIL=7,B.ROUND_HALF_FLOOR=8,B.EUCLID=9,B.config=B.set=function(c){var u,d;if(c!=null)if(typeof c=="object"){if(c.hasOwnProperty(u="DECIMAL_PLACES")&&(d=c[u],K(d,0,re,u),o=d),c.hasOwnProperty(u="ROUNDING_MODE")&&(d=c[u],K(d,0,8,u),l=d),c.hasOwnProperty(u="EXPONENTIAL_AT")&&(d=c[u],d&&d.pop?(K(d[0],-re,0,u),K(d[1],0,re,u),g=d[0],a=d[1]):(K(d,-re,re,u),g=-(a=d<0?-d:d))),c.hasOwnProperty(u="RANGE"))if(d=c[u],d&&d.pop)K(d[0],-re,-1,u),K(d[1],1,re,u),f=d[0],h=d[1];else if(K(d,-re,re,u),d)f=-(h=d<0?-d:d);else throw Error(me+u+" cannot be zero: "+d);if(c.hasOwnProperty(u="CRYPTO"))if(d=c[u],d===!!d)if(d)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))b=d;else throw b=!d,Error(me+"crypto unavailable");else b=d;else throw Error(me+u+" not true or false: "+d);if(c.hasOwnProperty(u="MODULO_MODE")&&(d=c[u],K(d,0,9,u),m=d),c.hasOwnProperty(u="POW_PRECISION")&&(d=c[u],K(d,0,re,u),T=d),c.hasOwnProperty(u="FORMAT"))if(d=c[u],typeof d=="object")k=d;else throw Error(me+u+" not an object: "+d);if(c.hasOwnProperty(u="ALPHABET"))if(d=c[u],typeof d=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(d))H=d.slice(0,10)=="0123456789",A=d;else throw Error(me+u+" invalid: "+d)}else throw Error(me+"Object expected: "+c);return{DECIMAL_PLACES:o,ROUNDING_MODE:l,EXPONENTIAL_AT:[g,a],RANGE:[f,h],CRYPTO:b,MODULO_MODE:m,POW_PRECISION:T,FORMAT:k,ALPHABET:A}},B.isBigNumber=function(c){if(!c||c._isBigNumber!==!0)return!1;if(!B.DEBUG)return!0;var u,d,v=c.c,w=c.e,y=c.s;e:if({}.toString.call(v)=="[object Array]"){if((y===1||y===-1)&&w>=-re&&w<=re&&w===Te(w)){if(v[0]===0){if(w===0&&v.length===1)return!0;break e}if(u=(w+1)%L,u<1&&(u+=L),String(v[0]).length==u){for(u=0;u<v.length;u++)if(d=v[u],d<0||d>=Be||d!==Te(d))break e;if(d!==0)return!0}}}else if(v===null&&w===null&&(y===null||y===1||y===-1))return!0;throw Error(me+"Invalid BigNumber: "+c)},B.maximum=B.max=function(){return be(arguments,-1)},B.minimum=B.min=function(){return be(arguments,1)},B.random=function(){var c=9007199254740992,u=Math.random()*c&2097151?function(){return Te(Math.random()*c)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(d){var v,w,y,I,p,E=0,_=[],S=new B(s);if(d==null?d=o:K(d,0,re),I=lr(d/L),b)if(crypto.getRandomValues){for(v=crypto.getRandomValues(new Uint32Array(I*=2));E<I;)p=v[E]*131072+(v[E+1]>>>11),p>=9e15?(w=crypto.getRandomValues(new Uint32Array(2)),v[E]=w[0],v[E+1]=w[1]):(_.push(p%1e14),E+=2);E=I/2}else if(crypto.randomBytes){for(v=crypto.randomBytes(I*=7);E<I;)p=(v[E]&31)*281474976710656+v[E+1]*1099511627776+v[E+2]*4294967296+v[E+3]*16777216+(v[E+4]<<16)+(v[E+5]<<8)+v[E+6],p>=9e15?crypto.randomBytes(7).copy(v,E):(_.push(p%1e14),E+=7);E=I/7}else throw b=!1,Error(me+"crypto unavailable");if(!b)for(;E<I;)p=u(),p<9e15&&(_[E++]=p%1e14);for(I=_[--E],d%=L,I&&d&&(p=fr[L-d],_[E]=Te(I/p)*p);_[E]===0;_.pop(),E--);if(E<0)_=[y=0];else{for(y=-1;_[0]===0;_.splice(0,1),y-=L);for(E=1,p=_[0];p>=10;p/=10,E++);E<L&&(y-=L-E)}return S.e=y,S.c=_,S}}(),B.sum=function(){for(var c=1,u=arguments,d=new B(u[0]);c<u.length;)d=d.plus(u[c++]);return d},n=function(){var c="0123456789";function u(d,v,w,y){for(var I,p=[0],E,_=0,S=d.length;_<S;){for(E=p.length;E--;p[E]*=v);for(p[0]+=y.indexOf(d.charAt(_++)),I=0;I<p.length;I++)p[I]>w-1&&(p[I+1]==null&&(p[I+1]=0),p[I+1]+=p[I]/w|0,p[I]%=w)}return p.reverse()}return function(d,v,w,y,I){var p,E,_,S,R,O,F,z,Q=d.indexOf("."),te=o,V=l;for(Q>=0&&(S=T,T=0,d=d.replace(".",""),z=new B(v),O=z.pow(d.length-Q),T=S,z.c=u($e(Se(O.c),O.e,"0"),10,w,c),z.e=z.c.length),F=u(d,v,w,I?(p=A,c):(p=c,A)),_=S=F.length;F[--S]==0;F.pop());if(!F[0])return p.charAt(0);if(Q<0?--_:(O.c=F,O.e=_,O.s=y,O=t(O,z,te,V,w),F=O.c,R=O.r,_=O.e),E=_+te+1,Q=F[E],S=w/2,R=R||E<0||F[E+1]!=null,R=V<4?(Q!=null||R)&&(V==0||V==(O.s<0?3:2)):Q>S||Q==S&&(V==4||R||V==6&&F[E-1]&1||V==(O.s<0?8:7)),E<1||!F[0])d=R?$e(p.charAt(1),-te,p.charAt(0)):p.charAt(0);else{if(F.length=E,R)for(--w;++F[--E]>w;)F[E]=0,E||(++_,F=[1].concat(F));for(S=F.length;!F[--S];);for(Q=0,d="";Q<=S;d+=p.charAt(F[Q++]));d=$e(d,_,p.charAt(0))}return d}}(),t=function(){function c(v,w,y){var I,p,E,_,S=0,R=v.length,O=w%rt,F=w/rt|0;for(v=v.slice();R--;)E=v[R]%rt,_=v[R]/rt|0,I=F*E+_*O,p=O*E+I%rt*rt+S,S=(p/y|0)+(I/rt|0)+F*_,v[R]=p%y;return S&&(v=[S].concat(v)),v}function u(v,w,y,I){var p,E;if(y!=I)E=y>I?1:-1;else for(p=E=0;p<y;p++)if(v[p]!=w[p]){E=v[p]>w[p]?1:-1;break}return E}function d(v,w,y,I){for(var p=0;y--;)v[y]-=p,p=v[y]<w[y]?1:0,v[y]=p*I+v[y]-w[y];for(;!v[0]&&v.length>1;v.splice(0,1));}return function(v,w,y,I,p){var E,_,S,R,O,F,z,Q,te,V,G,se,Tn,Yn,Jn,Ne,tn,ve=v.s==w.s?1:-1,le=v.c,Y=w.c;if(!le||!le[0]||!Y||!Y[0])return new B(!v.s||!w.s||(le?Y&&le[0]==Y[0]:!Y)?NaN:le&&le[0]==0||!Y?ve*0:ve/0);for(Q=new B(ve),te=Q.c=[],_=v.e-w.e,ve=y+_+1,p||(p=Be,_=xe(v.e/L)-xe(w.e/L),ve=ve/L|0),S=0;Y[S]==(le[S]||0);S++);if(Y[S]>(le[S]||0)&&_--,ve<0)te.push(1),R=!0;else{for(Yn=le.length,Ne=Y.length,S=0,ve+=2,O=Te(p/(Y[0]+1)),O>1&&(Y=c(Y,O,p),le=c(le,O,p),Ne=Y.length,Yn=le.length),Tn=Ne,V=le.slice(0,Ne),G=V.length;G<Ne;V[G++]=0);tn=Y.slice(),tn=[0].concat(tn),Jn=Y[0],Y[1]>=p/2&&Jn++;do{if(O=0,E=u(Y,V,Ne,G),E<0){if(se=V[0],Ne!=G&&(se=se*p+(V[1]||0)),O=Te(se/Jn),O>1)for(O>=p&&(O=p-1),F=c(Y,O,p),z=F.length,G=V.length;u(F,V,z,G)==1;)O--,d(F,Ne<z?tn:Y,z,p),z=F.length,E=1;else O==0&&(E=O=1),F=Y.slice(),z=F.length;if(z<G&&(F=[0].concat(F)),d(V,F,G,p),G=V.length,E==-1)for(;u(Y,V,Ne,G)<1;)O++,d(V,Ne<G?tn:Y,G,p),G=V.length}else E===0&&(O++,V=[0]);te[S++]=O,V[0]?V[G++]=le[Tn]||0:(V=[le[Tn]],G=1)}while((Tn++<Yn||V[0]!=null)&&ve--);R=V[0]!=null,te[0]||te.splice(0,1)}if(p==Be){for(S=1,ve=te[0];ve>=10;ve/=10,S++);X(Q,y+(Q.e=S+_*L-1)+1,I,R)}else Q.e=_,Q.r=+R;return Q}}();function Z(c,u,d,v){var w,y,I,p,E;if(d==null?d=l:K(d,0,8),!c.c)return c.toString();if(w=c.c[0],I=c.e,u==null)E=Se(c.c),E=v==1||v==2&&(I<=g||I>=a)?Nn(E,I):$e(E,I,"0");else if(c=X(new B(c),u,d),y=c.e,E=Se(c.c),p=E.length,v==1||v==2&&(u<=y||y<=g)){for(;p<u;E+="0",p++);E=Nn(E,y)}else if(u-=I,E=$e(E,y,"0"),y+1>p){if(--u>0)for(E+=".";u--;E+="0");}else if(u+=y-p,u>0)for(y+1==p&&(E+=".");u--;E+="0");return c.s<0&&w?"-"+E:E}function be(c,u){for(var d,v,w=1,y=new B(c[0]);w<c.length;w++)v=new B(c[w]),(!v.s||(d=bt(y,v))===u||d===0&&y.s===u)&&(y=v);return y}function ee(c,u,d){for(var v=1,w=u.length;!u[--w];u.pop());for(w=u[0];w>=10;w/=10,v++);return(d=v+d*L-1)>h?c.c=c.e=null:d<f?c.c=[c.e=0]:(c.e=d,c.c=u),c}r=function(){var c=/^(-?)0([xbo])(?=\w[\w.]*$)/i,u=/^([^.]+)\.$/,d=/^\.([^.]+)$/,v=/^-?(Infinity|NaN)$/,w=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(y,I,p,E){var _,S=p?I:I.replace(w,"");if(v.test(S))y.s=isNaN(S)?null:S<0?-1:1;else{if(!p&&(S=S.replace(c,function(R,O,F){return _=(F=F.toLowerCase())=="x"?16:F=="b"?2:8,!E||E==_?O:R}),E&&(_=E,S=S.replace(u,"$1").replace(d,"0.$1")),I!=S))return new B(S,_);if(B.DEBUG)throw Error(me+"Not a"+(E?" base "+E:"")+" number: "+I);y.s=null}y.c=y.e=null}}();function X(c,u,d,v){var w,y,I,p,E,_,S,R=c.c,O=fr;if(R){e:{for(w=1,p=R[0];p>=10;p/=10,w++);if(y=u-w,y<0)y+=L,I=u,E=R[_=0],S=Te(E/O[w-I-1]%10);else if(_=lr((y+1)/L),_>=R.length)if(v){for(;R.length<=_;R.push(0));E=S=0,w=1,y%=L,I=y-L+1}else break e;else{for(E=p=R[_],w=1;p>=10;p/=10,w++);y%=L,I=y-L+w,S=I<0?0:Te(E/O[w-I-1]%10)}if(v=v||u<0||R[_+1]!=null||(I<0?E:E%O[w-I-1]),v=d<4?(S||v)&&(d==0||d==(c.s<0?3:2)):S>5||S==5&&(d==4||v||d==6&&(y>0?I>0?E/O[w-I]:0:R[_-1])%10&1||d==(c.s<0?8:7)),u<1||!R[0])return R.length=0,v?(u-=c.e+1,R[0]=O[(L-u%L)%L],c.e=-u||0):R[0]=c.e=0,c;if(y==0?(R.length=_,p=1,_--):(R.length=_+1,p=O[L-y],R[_]=I>0?Te(E/O[w-I]%O[I])*p:0),v)for(;;)if(_==0){for(y=1,I=R[0];I>=10;I/=10,y++);for(I=R[0]+=p,p=1;I>=10;I/=10,p++);y!=p&&(c.e++,R[0]==Be&&(R[0]=1));break}else{if(R[_]+=p,R[_]!=Be)break;R[_--]=0,p=1}for(y=R.length;R[--y]===0;R.pop());}c.e>h?c.c=c.e=null:c.e<f&&(c.c=[c.e=0])}return c}function W(c){var u,d=c.e;return d===null?c.toString():(u=Se(c.c),u=d<=g||d>=a?Nn(u,d):$e(u,d,"0"),c.s<0?"-"+u:u)}return i.absoluteValue=i.abs=function(){var c=new B(this);return c.s<0&&(c.s=1),c},i.comparedTo=function(c,u){return bt(this,new B(c,u))},i.decimalPlaces=i.dp=function(c,u){var d,v,w,y=this;if(c!=null)return K(c,0,re),u==null?u=l:K(u,0,8),X(new B(y),c+y.e+1,u);if(!(d=y.c))return null;if(v=((w=d.length-1)-xe(this.e/L))*L,w=d[w])for(;w%10==0;w/=10,v--);return v<0&&(v=0),v},i.dividedBy=i.div=function(c,u){return t(this,new B(c,u),o,l)},i.dividedToIntegerBy=i.idiv=function(c,u){return t(this,new B(c,u),0,1)},i.exponentiatedBy=i.pow=function(c,u){var d,v,w,y,I,p,E,_,S,R=this;if(c=new B(c),c.c&&!c.isInteger())throw Error(me+"Exponent not an integer: "+W(c));if(u!=null&&(u=new B(u)),p=c.e>14,!R.c||!R.c[0]||R.c[0]==1&&!R.e&&R.c.length==1||!c.c||!c.c[0])return S=new B(Math.pow(+W(R),p?c.s*(2-Cn(c)):+W(c))),u?S.mod(u):S;if(E=c.s<0,u){if(u.c?!u.c[0]:!u.s)return new B(NaN);v=!E&&R.isInteger()&&u.isInteger(),v&&(R=R.mod(u))}else{if(c.e>9&&(R.e>0||R.e<-1||(R.e==0?R.c[0]>1||p&&R.c[1]>=24e7:R.c[0]<8e13||p&&R.c[0]<=9999975e7)))return y=R.s<0&&Cn(c)?-0:0,R.e>-1&&(y=1/y),new B(E?1/y:y);T&&(y=lr(T/L+2))}for(p?(d=new B(.5),E&&(c.s=1),_=Cn(c)):(w=Math.abs(+W(c)),_=w%2),S=new B(s);;){if(_){if(S=S.times(R),!S.c)break;y?S.c.length>y&&(S.c.length=y):v&&(S=S.mod(u))}if(w){if(w=Te(w/2),w===0)break;_=w%2}else if(c=c.times(d),X(c,c.e+1,1),c.e>14)_=Cn(c);else{if(w=+W(c),w===0)break;_=w%2}R=R.times(R),y?R.c&&R.c.length>y&&(R.c.length=y):v&&(R=R.mod(u))}return v?S:(E&&(S=s.div(S)),u?S.mod(u):y?X(S,T,l,I):S)},i.integerValue=function(c){var u=new B(this);return c==null?c=l:K(c,0,8),X(u,u.e+1,c)},i.isEqualTo=i.eq=function(c,u){return bt(this,new B(c,u))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(c,u){return bt(this,new B(c,u))>0},i.isGreaterThanOrEqualTo=i.gte=function(c,u){return(u=bt(this,new B(c,u)))===1||u===0},i.isInteger=function(){return!!this.c&&xe(this.e/L)>this.c.length-2},i.isLessThan=i.lt=function(c,u){return bt(this,new B(c,u))<0},i.isLessThanOrEqualTo=i.lte=function(c,u){return(u=bt(this,new B(c,u)))===-1||u===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(c,u){var d,v,w,y,I=this,p=I.s;if(c=new B(c,u),u=c.s,!p||!u)return new B(NaN);if(p!=u)return c.s=-u,I.plus(c);var E=I.e/L,_=c.e/L,S=I.c,R=c.c;if(!E||!_){if(!S||!R)return S?(c.s=-u,c):new B(R?I:NaN);if(!S[0]||!R[0])return R[0]?(c.s=-u,c):new B(S[0]?I:l==3?-0:0)}if(E=xe(E),_=xe(_),S=S.slice(),p=E-_){for((y=p<0)?(p=-p,w=S):(_=E,w=R),w.reverse(),u=p;u--;w.push(0));w.reverse()}else for(v=(y=(p=S.length)<(u=R.length))?p:u,p=u=0;u<v;u++)if(S[u]!=R[u]){y=S[u]<R[u];break}if(y&&(w=S,S=R,R=w,c.s=-c.s),u=(v=R.length)-(d=S.length),u>0)for(;u--;S[d++]=0);for(u=Be-1;v>p;){if(S[--v]<R[v]){for(d=v;d&&!S[--d];S[d]=u);--S[d],S[v]+=Be}S[v]-=R[v]}for(;S[0]==0;S.splice(0,1),--_);return S[0]?ee(c,S,_):(c.s=l==3?-1:1,c.c=[c.e=0],c)},i.modulo=i.mod=function(c,u){var d,v,w=this;return c=new B(c,u),!w.c||!c.s||c.c&&!c.c[0]?new B(NaN):!c.c||w.c&&!w.c[0]?new B(w):(m==9?(v=c.s,c.s=1,d=t(w,c,0,3),c.s=v,d.s*=v):d=t(w,c,0,m),c=w.minus(d.times(c)),!c.c[0]&&m==1&&(c.s=w.s),c)},i.multipliedBy=i.times=function(c,u){var d,v,w,y,I,p,E,_,S,R,O,F,z,Q,te,V=this,G=V.c,se=(c=new B(c,u)).c;if(!G||!se||!G[0]||!se[0])return!V.s||!c.s||G&&!G[0]&&!se||se&&!se[0]&&!G?c.c=c.e=c.s=null:(c.s*=V.s,!G||!se?c.c=c.e=null:(c.c=[0],c.e=0)),c;for(v=xe(V.e/L)+xe(c.e/L),c.s*=V.s,E=G.length,R=se.length,E<R&&(z=G,G=se,se=z,w=E,E=R,R=w),w=E+R,z=[];w--;z.push(0));for(Q=Be,te=rt,w=R;--w>=0;){for(d=0,O=se[w]%te,F=se[w]/te|0,I=E,y=w+I;y>w;)_=G[--I]%te,S=G[I]/te|0,p=F*_+S*O,_=O*_+p%te*te+z[y]+d,d=(_/Q|0)+(p/te|0)+F*S,z[y--]=_%Q;z[y]=d}return d?++v:z.splice(0,1),ee(c,z,v)},i.negated=function(){var c=new B(this);return c.s=-c.s||null,c},i.plus=function(c,u){var d,v=this,w=v.s;if(c=new B(c,u),u=c.s,!w||!u)return new B(NaN);if(w!=u)return c.s=-u,v.minus(c);var y=v.e/L,I=c.e/L,p=v.c,E=c.c;if(!y||!I){if(!p||!E)return new B(w/0);if(!p[0]||!E[0])return E[0]?c:new B(p[0]?v:w*0)}if(y=xe(y),I=xe(I),p=p.slice(),w=y-I){for(w>0?(I=y,d=E):(w=-w,d=p),d.reverse();w--;d.push(0));d.reverse()}for(w=p.length,u=E.length,w-u<0&&(d=E,E=p,p=d,u=w),w=0;u;)w=(p[--u]=p[u]+E[u]+w)/Be|0,p[u]=Be===p[u]?0:p[u]%Be;return w&&(p=[w].concat(p),++I),ee(c,p,I)},i.precision=i.sd=function(c,u){var d,v,w,y=this;if(c!=null&&c!==!!c)return K(c,1,re),u==null?u=l:K(u,0,8),X(new B(y),c,u);if(!(d=y.c))return null;if(w=d.length-1,v=w*L+1,w=d[w]){for(;w%10==0;w/=10,v--);for(w=d[0];w>=10;w/=10,v++);}return c&&y.e+1>v&&(v=y.e+1),v},i.shiftedBy=function(c){return K(c,-ur,ur),this.times("1e"+c)},i.squareRoot=i.sqrt=function(){var c,u,d,v,w,y=this,I=y.c,p=y.s,E=y.e,_=o+4,S=new B("0.5");if(p!==1||!I||!I[0])return new B(!p||p<0&&(!I||I[0])?NaN:I?y:1/0);if(p=Math.sqrt(+W(y)),p==0||p==1/0?(u=Se(I),(u.length+E)%2==0&&(u+="0"),p=Math.sqrt(+u),E=xe((E+1)/2)-(E<0||E%2),p==1/0?u="5e"+E:(u=p.toExponential(),u=u.slice(0,u.indexOf("e")+1)+E),d=new B(u)):d=new B(p+""),d.c[0]){for(E=d.e,p=E+_,p<3&&(p=0);;)if(w=d,d=S.times(w.plus(t(y,w,_,1))),Se(w.c).slice(0,p)===(u=Se(d.c)).slice(0,p))if(d.e<E&&--p,u=u.slice(p-3,p+1),u=="9999"||!v&&u=="4999"){if(!v&&(X(w,w.e+o+2,0),w.times(w).eq(y))){d=w;break}_+=4,p+=4,v=1}else{(!+u||!+u.slice(1)&&u.charAt(0)=="5")&&(X(d,d.e+o+2,1),c=!d.times(d).eq(y));break}}return X(d,d.e+o+1,l,c)},i.toExponential=function(c,u){return c!=null&&(K(c,0,re),c++),Z(this,c,u,1)},i.toFixed=function(c,u){return c!=null&&(K(c,0,re),c=c+this.e+1),Z(this,c,u)},i.toFormat=function(c,u,d){var v,w=this;if(d==null)c!=null&&u&&typeof u=="object"?(d=u,u=null):c&&typeof c=="object"?(d=c,c=u=null):d=k;else if(typeof d!="object")throw Error(me+"Argument not an object: "+d);if(v=w.toFixed(c,u),w.c){var y,I=v.split("."),p=+d.groupSize,E=+d.secondaryGroupSize,_=d.groupSeparator||"",S=I[0],R=I[1],O=w.s<0,F=O?S.slice(1):S,z=F.length;if(E&&(y=p,p=E,E=y,z-=y),p>0&&z>0){for(y=z%p||p,S=F.substr(0,y);y<z;y+=p)S+=_+F.substr(y,p);E>0&&(S+=_+F.slice(y)),O&&(S="-"+S)}v=R?S+(d.decimalSeparator||"")+((E=+d.fractionGroupSize)?R.replace(new RegExp("\\d{"+E+"}\\B","g"),"$&"+(d.fractionGroupSeparator||"")):R):S}return(d.prefix||"")+v+(d.suffix||"")},i.toFraction=function(c){var u,d,v,w,y,I,p,E,_,S,R,O,F=this,z=F.c;if(c!=null&&(p=new B(c),!p.isInteger()&&(p.c||p.s!==1)||p.lt(s)))throw Error(me+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+W(p));if(!z)return new B(F);for(u=new B(s),_=d=new B(s),v=E=new B(s),O=Se(z),y=u.e=O.length-F.e-1,u.c[0]=fr[(I=y%L)<0?L+I:I],c=!c||p.comparedTo(u)>0?y>0?u:_:p,I=h,h=1/0,p=new B(O),E.c[0]=0;S=t(p,u,0,1),w=d.plus(S.times(v)),w.comparedTo(c)!=1;)d=v,v=w,_=E.plus(S.times(w=_)),E=w,u=p.minus(S.times(w=u)),p=w;return w=t(c.minus(d),v,0,1),E=E.plus(w.times(_)),d=d.plus(w.times(v)),E.s=_.s=F.s,y=y*2,R=t(_,v,y,l).minus(F).abs().comparedTo(t(E,d,y,l).minus(F).abs())<1?[_,v]:[E,d],h=I,R},i.toNumber=function(){return+W(this)},i.toPrecision=function(c,u){return c!=null&&K(c,1,re),Z(this,c,u,2)},i.toString=function(c){var u,d=this,v=d.s,w=d.e;return w===null?v?(u="Infinity",v<0&&(u="-"+u)):u="NaN":(c==null?u=w<=g||w>=a?Nn(Se(d.c),w):$e(Se(d.c),w,"0"):c===10&&H?(d=X(new B(d),o+w+1,l),u=$e(Se(d.c),d.e,"0")):(K(c,2,A.length,"Base"),u=n($e(Se(d.c),w,"0"),10,c,v,!0)),v<0&&d.c[0]&&(u="-"+u)),u},i.valueOf=i.toJSON=function(){return W(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&B.set(e),B}function xe(e){var t=e|0;return e>0||e===t?t:t-1}function Se(e){for(var t,n,r=1,i=e.length,s=e[0]+"";r<i;){for(t=e[r++]+"",n=L-t.length;n--;t="0"+t);s+=t}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function bt(e,t){var n,r,i=e.c,s=t.c,o=e.s,l=t.s,g=e.e,a=t.e;if(!o||!l)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-l:o;if(o!=l)return o;if(n=o<0,r=g==a,!i||!s)return r?0:!i^n?1:-1;if(!r)return g>a^n?1:-1;for(l=(g=i.length)<(a=s.length)?g:a,o=0;o<l;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return g==a?0:g>a^n?1:-1}function K(e,t,n,r){if(e<t||e>n||e!==Te(e))throw Error(me+(r||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Cn(e){var t=e.c.length-1;return xe(e.e/L)==t&&e.c[t]%2!=0}function Nn(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function $e(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var D=zs();const di=6e4,gi=525600,mi=43200,pi=1440,bi=Symbol.for("constructDateFrom");function Lr(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&bi in e?e[bi](t):e instanceof Date?new e.constructor(t):new Date(t)}function Cr(e,t){return Lr(e,e)}let Gc={};function Wc(){return Gc}function wi(e){const t=Cr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function qc(e,...t){const n=Lr.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function Xc(e,t){const n=+Cr(e)-+Cr(t);return n<0?-1:n>0?1:n}function Kc(e){return Lr(e,Date.now())}function Qc(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}const Yc={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Jc=(e,t,n)=>{let r;const i=Yc[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hr(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Zc={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},el={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tl={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nl={date:hr({formats:Zc,defaultWidth:"full"}),time:hr({formats:el,defaultWidth:"full"}),dateTime:hr({formats:tl,defaultWidth:"full"})},rl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},il=(e,t,n,r)=>rl[e];function rn(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const sl={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ol={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},al={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},cl={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ll={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ul={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fl=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},hl={ordinalNumber:fl,era:rn({values:sl,defaultWidth:"wide"}),quarter:rn({values:ol,defaultWidth:"wide",argumentCallback:e=>e-1}),month:rn({values:al,defaultWidth:"wide"}),day:rn({values:cl,defaultWidth:"wide"}),dayPeriod:rn({values:ll,defaultWidth:"wide",formattingValues:ul,defaultFormattingWidth:"wide"})};function sn(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],g=Array.isArray(l)?gl(l,h=>h.test(o)):dl(l,h=>h.test(o));let a;a=e.valueCallback?e.valueCallback(g):g,a=n.valueCallback?n.valueCallback(a):a;const f=t.slice(o.length);return{value:a,rest:f}}}function dl(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function gl(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function ml(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const pl=/^(\d+)(th|st|nd|rd)?/i,bl=/\d+/i,wl={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yl={any:[/^b/i,/^(a|c)/i]},El={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vl={any:[/1/i,/2/i,/3/i,/4/i]},Sl={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tl={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xl={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_l={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Il={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bl={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kl={ordinalNumber:ml({matchPattern:pl,parsePattern:bl,valueCallback:e=>parseInt(e,10)}),era:sn({matchPatterns:wl,defaultMatchWidth:"wide",parsePatterns:yl,defaultParseWidth:"any"}),quarter:sn({matchPatterns:El,defaultMatchWidth:"wide",parsePatterns:vl,defaultParseWidth:"any",valueCallback:e=>e+1}),month:sn({matchPatterns:Sl,defaultMatchWidth:"wide",parsePatterns:Tl,defaultParseWidth:"any"}),day:sn({matchPatterns:xl,defaultMatchWidth:"wide",parsePatterns:_l,defaultParseWidth:"any"}),dayPeriod:sn({matchPatterns:Il,defaultMatchWidth:"any",parsePatterns:Bl,defaultParseWidth:"any"})},Rl={code:"en-US",formatDistance:Jc,formatLong:nl,formatRelative:il,localize:hl,match:kl,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Al(e,t,n){const i=Wc().locale??Rl,s=Xc(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,g]=qc(n==null?void 0:n.in,...s>0?[t,e]:[e,t]),a=Qc("round"),f=g.getTime()-l.getTime(),h=f/di,b=wi(g)-wi(l),m=(f-b)/di,T=n==null?void 0:n.unit;let k;if(h<1?k="second":h<60?k="minute":h<pi?k="hour":m<mi?k="day":m<gi?k="month":k="year",k==="second"){const A=a(f/1e3);return i.formatDistance("xSeconds",A,o)}else if(k==="minute"){const A=a(h);return i.formatDistance("xMinutes",A,o)}else if(k==="hour"){const A=a(h/60);return i.formatDistance("xHours",A,o)}else if(k==="day"){const A=a(m/pi);return i.formatDistance("xDays",A,o)}else if(k==="month"){const A=a(m/mi);return A===12&&T!=="month"?i.formatDistance("xYears",1,o):i.formatDistance("xMonths",A,o)}else{const A=a(m/gi);return i.formatDistance("xYears",A,o)}}function Cl(e,t){return Al(e,Kc(e),t)}var $s={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */(function(e){(function(t,n){e.exports?e.exports=n():t.numeral=n()})(oo,function(){var t,n,r="2.0.6",i={},s={},o={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},l={currentLocale:o.currentLocale,zeroFormat:o.zeroFormat,nullFormat:o.nullFormat,defaultFormat:o.defaultFormat,scalePercentBy100:o.scalePercentBy100};function g(a,f){this._input=a,this._value=f}return t=function(a){var f,h,b,m;if(t.isNumeral(a))f=a.value();else if(a===0||typeof a>"u")f=0;else if(a===null||n.isNaN(a))f=null;else if(typeof a=="string")if(l.zeroFormat&&a===l.zeroFormat)f=0;else if(l.nullFormat&&a===l.nullFormat||!a.replace(/[^0-9]+/g,"").length)f=null;else{for(h in i)if(m=typeof i[h].regexps.unformat=="function"?i[h].regexps.unformat():i[h].regexps.unformat,m&&a.match(m)){b=i[h].unformat;break}b=b||t._.stringToNumber,f=b(a)}else f=Number(a)||null;return new g(a,f)},t.version=r,t.isNumeral=function(a){return a instanceof g},t._=n={numberToFormat:function(a,f,h){var b=s[t.options.currentLocale],m=!1,T=!1,k=0,A="",H=1e12,B=1e9,Z=1e6,be=1e3,ee="",X=!1,W,c,u,d,v,w,y;if(a=a||0,c=Math.abs(a),t._.includes(f,"(")?(m=!0,f=f.replace(/[\(|\)]/g,"")):(t._.includes(f,"+")||t._.includes(f,"-"))&&(v=t._.includes(f,"+")?f.indexOf("+"):a<0?f.indexOf("-"):-1,f=f.replace(/[\+|\-]/g,"")),t._.includes(f,"a")&&(W=f.match(/a(k|m|b|t)?/),W=W?W[1]:!1,t._.includes(f," a")&&(A=" "),f=f.replace(new RegExp(A+"a[kmbt]?"),""),c>=H&&!W||W==="t"?(A+=b.abbreviations.trillion,a=a/H):c<H&&c>=B&&!W||W==="b"?(A+=b.abbreviations.billion,a=a/B):c<B&&c>=Z&&!W||W==="m"?(A+=b.abbreviations.million,a=a/Z):(c<Z&&c>=be&&!W||W==="k")&&(A+=b.abbreviations.thousand,a=a/be)),t._.includes(f,"[.]")&&(T=!0,f=f.replace("[.]",".")),u=a.toString().split(".")[0],d=f.split(".")[1],w=f.indexOf(","),k=(f.split(".")[0].split(",")[0].match(/0/g)||[]).length,d?(t._.includes(d,"[")?(d=d.replace("]",""),d=d.split("["),ee=t._.toFixed(a,d[0].length+d[1].length,h,d[1].length)):ee=t._.toFixed(a,d.length,h),u=ee.split(".")[0],t._.includes(ee,".")?ee=b.delimiters.decimal+ee.split(".")[1]:ee="",T&&Number(ee.slice(1))===0&&(ee="")):u=t._.toFixed(a,0,h),A&&!W&&Number(u)>=1e3&&A!==b.abbreviations.trillion)switch(u=String(Number(u)/1e3),A){case b.abbreviations.thousand:A=b.abbreviations.million;break;case b.abbreviations.million:A=b.abbreviations.billion;break;case b.abbreviations.billion:A=b.abbreviations.trillion;break}if(t._.includes(u,"-")&&(u=u.slice(1),X=!0),u.length<k)for(var I=k-u.length;I>0;I--)u="0"+u;return w>-1&&(u=u.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+b.delimiters.thousands)),f.indexOf(".")===0&&(u=""),y=u+ee+(A||""),m?y=(m&&X?"(":"")+y+(m&&X?")":""):v>=0?y=v===0?(X?"-":"+")+y:y+(X?"-":"+"):X&&(y="-"+y),y},stringToNumber:function(a){var f=s[l.currentLocale],h=a,b={thousand:3,million:6,billion:9,trillion:12},m,T,k;if(l.zeroFormat&&a===l.zeroFormat)T=0;else if(l.nullFormat&&a===l.nullFormat||!a.replace(/[^0-9]+/g,"").length)T=null;else{T=1,f.delimiters.decimal!=="."&&(a=a.replace(/\./g,"").replace(f.delimiters.decimal,"."));for(m in b)if(k=new RegExp("[^a-zA-Z]"+f.abbreviations[m]+"(?:\\)|(\\"+f.currency.symbol+")?(?:\\))?)?$"),h.match(k)){T*=Math.pow(10,b[m]);break}T*=(a.split("-").length+Math.min(a.split("(").length-1,a.split(")").length-1))%2?1:-1,a=a.replace(/[^0-9\.]+/g,""),T*=Number(a)}return T},isNaN:function(a){return typeof a=="number"&&isNaN(a)},includes:function(a,f){return a.indexOf(f)!==-1},insert:function(a,f,h){return a.slice(0,h)+f+a.slice(h)},reduce:function(a,f){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof f!="function")throw new TypeError(f+" is not a function");var h=Object(a),b=h.length>>>0,m=0,T;if(arguments.length===3)T=arguments[2];else{for(;m<b&&!(m in h);)m++;if(m>=b)throw new TypeError("Reduce of empty array with no initial value");T=h[m++]}for(;m<b;m++)m in h&&(T=f(T,h[m],m,h));return T},multiplier:function(a){var f=a.toString().split(".");return f.length<2?1:Math.pow(10,f[1].length)},correctionFactor:function(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(f,h){var b=n.multiplier(h);return f>b?f:b},1)},toFixed:function(a,f,h,b){var m=a.toString().split("."),T=f-(b||0),k,A,H,B;return m.length===2?k=Math.min(Math.max(m[1].length,T),f):k=T,H=Math.pow(10,k),B=(h(a+"e+"+k)/H).toFixed(k),b>f-k&&(A=new RegExp("\\.?0{1,"+(b-(f-k))+"}$"),B=B.replace(A,"")),B}},t.options=l,t.formats=i,t.locales=s,t.locale=function(a){return a&&(l.currentLocale=a.toLowerCase()),l.currentLocale},t.localeData=function(a){if(!a)return s[l.currentLocale];if(a=a.toLowerCase(),!s[a])throw new Error("Unknown locale : "+a);return s[a]},t.reset=function(){for(var a in o)l[a]=o[a]},t.zeroFormat=function(a){l.zeroFormat=typeof a=="string"?a:null},t.nullFormat=function(a){l.nullFormat=typeof a=="string"?a:null},t.defaultFormat=function(a){l.defaultFormat=typeof a=="string"?a:"0.0"},t.register=function(a,f,h){if(f=f.toLowerCase(),this[a+"s"][f])throw new TypeError(f+" "+a+" already registered.");return this[a+"s"][f]=h,h},t.validate=function(a,f){var h,b,m,T,k,A,H,B;if(typeof a!="string"&&(a+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",a)),a=a.trim(),a.match(/^\d+$/))return!0;if(a==="")return!1;try{H=t.localeData(f)}catch{H=t.localeData(t.locale())}return m=H.currency.symbol,k=H.abbreviations,h=H.delimiters.decimal,H.delimiters.thousands==="."?b="\\.":b=H.delimiters.thousands,B=a.match(/^[^\d]+/),B!==null&&(a=a.substr(1),B[0]!==m)||(B=a.match(/[^\d]+$/),B!==null&&(a=a.slice(0,-1),B[0]!==k.thousand&&B[0]!==k.million&&B[0]!==k.billion&&B[0]!==k.trillion))?!1:(A=new RegExp(b+"{2}"),a.match(/[^\d.,]/g)?!1:(T=a.split(h),T.length>2?!1:T.length<2?!!T[0].match(/^\d+.*\d$/)&&!T[0].match(A):T[0].length===1?!!T[0].match(/^\d+$/)&&!T[0].match(A)&&!!T[1].match(/^\d+$/):!!T[0].match(/^\d+.*\d$/)&&!T[0].match(A)&&!!T[1].match(/^\d+$/)))},t.fn=g.prototype={clone:function(){return t(this)},format:function(a,f){var h=this._value,b=a||l.defaultFormat,m,T,k;if(f=f||Math.round,h===0&&l.zeroFormat!==null)T=l.zeroFormat;else if(h===null&&l.nullFormat!==null)T=l.nullFormat;else{for(m in i)if(b.match(i[m].regexps.format)){k=i[m].format;break}k=k||t._.numberToFormat,T=k(h,b,f)}return T},value:function(){return this._value},input:function(){return this._input},set:function(a){return this._value=Number(a),this},add:function(a){var f=n.correctionFactor.call(null,this._value,a);function h(b,m,T,k){return b+Math.round(f*m)}return this._value=n.reduce([this._value,a],h,0)/f,this},subtract:function(a){var f=n.correctionFactor.call(null,this._value,a);function h(b,m,T,k){return b-Math.round(f*m)}return this._value=n.reduce([a],h,Math.round(this._value*f))/f,this},multiply:function(a){function f(h,b,m,T){var k=n.correctionFactor(h,b);return Math.round(h*k)*Math.round(b*k)/Math.round(k*k)}return this._value=n.reduce([this._value,a],f,1),this},divide:function(a){function f(h,b,m,T){var k=n.correctionFactor(h,b);return Math.round(h*k)/Math.round(b*k)}return this._value=n.reduce([this._value,a],f),this},difference:function(a){return Math.abs(t(this._value).subtract(a).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var f=a%10;return~~(a%100/10)===1?"th":f===1?"st":f===2?"nd":f===3?"rd":"th"},currency:{symbol:"$"}}),function(){t.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(a,f,h){var b=t._.includes(f," BPS")?" ":"",m;return a=a*1e4,f=f.replace(/\s?BPS/,""),m=t._.numberToFormat(a,f,h),t._.includes(m,")")?(m=m.split(""),m.splice(-1,0,b+"BPS"),m=m.join("")):m=m+b+"BPS",m},unformat:function(a){return+(t._.stringToNumber(a)*1e-4).toFixed(15)}})}(),function(){var a={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},f={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},h=a.suffixes.concat(f.suffixes.filter(function(m){return a.suffixes.indexOf(m)<0})),b=h.join("|");b="("+b.replace("B","B(?!PS)")+")",t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(b)},format:function(m,T,k){var A,H=t._.includes(T,"ib")?f:a,B=t._.includes(T," b")||t._.includes(T," ib")?" ":"",Z,be,ee;for(T=T.replace(/\s?i?b/,""),Z=0;Z<=H.suffixes.length;Z++)if(be=Math.pow(H.base,Z),ee=Math.pow(H.base,Z+1),m===null||m===0||m>=be&&m<ee){B+=H.suffixes[Z],be>0&&(m=m/be);break}return A=t._.numberToFormat(m,T,k),A+B},unformat:function(m){var T=t._.stringToNumber(m),k,A;if(T){for(k=a.suffixes.length-1;k>=0;k--){if(t._.includes(m,a.suffixes[k])){A=Math.pow(a.base,k);break}if(t._.includes(m,f.suffixes[k])){A=Math.pow(f.base,k);break}}T*=A||1}return T}})}(),function(){t.register("format","currency",{regexps:{format:/(\$)/},format:function(a,f,h){var b=t.locales[t.options.currentLocale],m={before:f.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:f.match(/([\+|\-|\)|\s|\$]*)$/)[0]},T,k,A;for(f=f.replace(/\s?\$\s?/,""),T=t._.numberToFormat(a,f,h),a>=0?(m.before=m.before.replace(/[\-\(]/,""),m.after=m.after.replace(/[\-\)]/,"")):a<0&&!t._.includes(m.before,"-")&&!t._.includes(m.before,"(")&&(m.before="-"+m.before),A=0;A<m.before.length;A++)switch(k=m.before[A],k){case"$":T=t._.insert(T,b.currency.symbol,A);break;case" ":T=t._.insert(T," ",A+b.currency.symbol.length-1);break}for(A=m.after.length-1;A>=0;A--)switch(k=m.after[A],k){case"$":T=A===m.after.length-1?T+b.currency.symbol:t._.insert(T,b.currency.symbol,-(m.after.length-(1+A)));break;case" ":T=A===m.after.length-1?T+" ":t._.insert(T," ",-(m.after.length-(1+A)+b.currency.symbol.length-1));break}return T}})}(),function(){t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(a,f,h){var b,m=typeof a=="number"&&!t._.isNaN(a)?a.toExponential():"0e+0",T=m.split("e");return f=f.replace(/e[\+|\-]{1}0/,""),b=t._.numberToFormat(Number(T[0]),f,h),b+"e"+T[1]},unformat:function(a){var f=t._.includes(a,"e+")?a.split("e+"):a.split("e-"),h=Number(f[0]),b=Number(f[1]);b=t._.includes(a,"e-")?b*=-1:b;function m(T,k,A,H){var B=t._.correctionFactor(T,k),Z=T*B*(k*B)/(B*B);return Z}return t._.reduce([h,Math.pow(10,b)],m,1)}})}(),function(){t.register("format","ordinal",{regexps:{format:/(o)/},format:function(a,f,h){var b=t.locales[t.options.currentLocale],m,T=t._.includes(f," o")?" ":"";return f=f.replace(/\s?o/,""),T+=b.ordinal(a),m=t._.numberToFormat(a,f,h),m+T}})}(),function(){t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(a,f,h){var b=t._.includes(f," %")?" ":"",m;return t.options.scalePercentBy100&&(a=a*100),f=f.replace(/\s?\%/,""),m=t._.numberToFormat(a,f,h),t._.includes(m,")")?(m=m.split(""),m.splice(-1,0,b+"%"),m=m.join("")):m=m+b+"%",m},unformat:function(a){var f=t._.stringToNumber(a);return t.options.scalePercentBy100?f*.01:f}})}(),function(){t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(a,f,h){var b=Math.floor(a/60/60),m=Math.floor((a-b*60*60)/60),T=Math.round(a-b*60*60-m*60);return b+":"+(m<10?"0"+m:m)+":"+(T<10?"0"+T:T)},unformat:function(a){var f=a.split(":"),h=0;return f.length===3?(h=h+Number(f[0])*60*60,h=h+Number(f[1])*60,h=h+Number(f[2])):f.length===2&&(h=h+Number(f[0])*60,h=h+Number(f[1])),Number(h)}})}(),t})})($s);var Nl=$s.exports;const Pl=ao(Nl);function _u(e){return BigInt(D(e).multipliedBy(1e9).toString())}function Iu(e){return BigInt(D(e).multipliedBy(100).toString())}function Jt(...e){return e.reduce((t,n)=>n<t?n:t)}function Xn(...e){return e.reduce((t,n)=>n>t?n:t)}function Kn(e){return e>=0n?e:-e}function Bu(e,t=2){return typeof e=="bigint"?(Number(e)/10**9).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:t}):"0.00"}function ku(e){return typeof e=="bigint"?(Number(e)/10**2).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):"0.00"}function Nr(e){return Ha(e)}function Ol(e,t){if(t.length==0)return!1;const n=t.map(r=>Yt.fromBase58(r).ergoTree);return e.outputs.some(r=>n.includes(r.ergoTree))}function Ru(e){return Cl(new Date(e)).replace(/ hours?/,"h").replace(/ minutes?/,"m").replace(/ days?/,"d").replace(/ seconds?/,"s")+" ago"}function Au(e,t=!0){if(e==null)return"0";let n=typeof e=="bigint"?Number(e):e;const r=n>0&&t?"+":"";let i="",s=n;const o=Math.abs(n);o>=1e12?(s=n/1e12,i="T"):o>=1e9?(s=n/1e9,i="B"):o>=1e6?(s=n/1e6,i="M"):o>=1e3&&(s=n/1e3,i="k");const g=Math.floor(Math.abs(s))<100?"0.00":"0.0";let a=Pl(s).format(g);return a.endsWith(".0")&&(a=a.slice(0,-2)),r+a+i}const Ce=j($l()),Ve=j([]),Ur=j(zl());function Fl(e,t){Ur.set(e.slice(0,3).map(n=>Hr(n,t)))}function Ml(e,t){let n=Hr(e,t);return n.tx=e,Ce.update(r=>[n,...r]),n.id}function Cu(e,t,n){const r=U(Ce).find(i=>i.id==t);return r?(Ce.update(i=>(i.forEach(s=>{s.id==t&&(s.transactionId=e.id,s.tx=e)}),i)),r.id):Ml(e,n)}function yi(e){Ce.update(t=>{const n=t.find(r=>r.id==e);return n&&(n.rejected=!0),t}),setTimeout(()=>{const t=U(Ce).filter(n=>n.id!=e);Ce.set(t)},1e3)}function Ei(e,t){let n=Dl(e);Ll(e);const r=e.unconfirmed_transactions;if((r==null?void 0:r.length)>0){const i=jl(r);Vl(r,i,t)}setTimeout(Ul,500),n.length>0&&setTimeout(()=>Hl(n),1550)}function Dl(e){var t;if(((t=e.confirmed_transactions)==null?void 0:t.length)>0){const n=e.confirmed_transactions.map(s=>s.id),r=U(Ve).map(s=>(n.includes(s.transactionId)&&(s.confirmed=!0),s)),i=U(Ve).filter(s=>n.includes(s.transactionId));return Ve.set(r),Vn(),i}return[]}function Ll(e){const t=e.confirmed_transactions.map(s=>s.id),n=e.unconfirmed_transactions.map(s=>s.id),i=U(Ve).map(s=>s.transactionId).filter(s=>!t.includes(s)&&!n.includes(s));if(i.length>0){const s=U(Ve).map(o=>(i.includes(o.transactionId)&&(o.rejected=!0,console.warn("SET REJECTED",{i:o})),o));Ve.set(s)}}function Ul(){const e=U(Ve),t=e.filter(n=>!(n.confirmed||n.rejected));e.length>t.length&&Ve.set(t)}function Hl(e){Ur.update(t=>[...e,...t].slice(0,3))}function jl(e){const t=e.map(l=>l.id);let n=U(Ce);const r=n.length;let i=n.filter(l=>t.includes(l.transactionId)),s=n.filter(l=>!t.includes(l.transactionId));return s.length<r&&Ce.set(s),i}function Vl(e,t=[],n){const r=e.map(f=>f.id);let i=U(Ve);const s=i.length;let o=i.filter(f=>r.includes(f.transactionId)),l=o.map(f=>f.transactionId),g=e.filter(f=>!l.includes(f.id)).map(f=>t.find(h=>h.transactionId==f.id)??Hr(f,n));const a=o.length;s==a&&g.length==0||Ve.set([...g,...i])}function Hr(e,t){var Z,be,ee;const n=cr(e,yt),r=((Z=e.outputs[1])==null?void 0:Z.ergoTree)||((be=e.inputs[0])==null?void 0:be.ergoTree),i=cr(e,r);cr(e,kn);const s=jc(n,i),{inputsErgoTrees:o,outputsErgoTrees:l}=Hc(e);fi(o,[]);const g=fi(l,[yt,kn,r]),a=Uc(e,void 0,[yt]),f=ui(e,void 0,[yt,kn]),h=zc(g,o,f,(ee=n.ergoStats)==null?void 0:ee.difference),b=ui(e,void 0,[yt,kn,...h]);let m,T,k,A,H,B;if(s.pair=="USD/ERG"){const X=Rn(b,Rr),W=Rn(a,Rr);T=Number(X-W),m=Vs(T),A=Number(An(b)-An(a)),k=Ar(A),H=-(m/k).toFixed(2),B="SigUSD"}else{const X=Rn(b,kr),W=Rn(a,kr);T=Number(X-W),m=T,A=Number(An(b)-An(a)),k=Ar(A),H=-(m/k).toFixed(2),B="SigRSV"}return{id:e.id+crypto.randomUUID(),transactionId:e.id,tx:e,amountExact:Number(m),amount:Number(m),amountCurrency:B,timestamp:e.timestamp?e.timestamp:e.creationTimestamp??Date.now(),price:Number(H),type:s.operation,ergAmount:Number(k),ergAmountInNanoErg:A,confirmed:!1,rejected:!1,own:Ol(e,t)}}function Nu(){const e=U(Ur);localStorage.setItem("confirmed_interactions",JSON.stringify(e))}function zl(){const e=localStorage.getItem("confirmed_interactions");return e?JSON.parse(e):[]}function Pu(){const e=U(Ce);localStorage.setItem("prepared_interactions",JSON.stringify(e))}function $l(){const e=localStorage.getItem("prepared_interactions");return e?JSON.parse(e):[]}function Gs(e){var s;const t=e.flatMap(o=>o.outputs).filter(o=>o.ergoTree==yt),n=e.flatMap(o=>o.inputs.flatMap(l=>l.boxId)),r=e.map(o=>Wl(o,t,n)).filter(o=>!!o),i=ql(r);return(s=Gl(i))==null?void 0:s.box}function Gl(e){return e.length===0?void 0:e.reduce((n,r)=>{const i=r.reduce((o,l)=>o+l.minerFee,0),s=n.reduce((o,l)=>o+l.minerFee,0);return i>s?r:n},[]).at(-1)||void 0}function Wl(e,t,n){var o,l;const r=e.outputs.find(g=>g.ergoTree==yt),i=(o=e.outputs.find(g=>g.ergoTree==Os))==null?void 0:o.value,s=(l=e.inputs.find(g=>t.flatMap(a=>a.boxId).includes(g.boxId)))==null?void 0:l.boxId;if(r&&i)return{box:r,minerFee:i,inputBoxId:s,hasParent:n.includes(r.boxId)}}function ql(e){return e.filter(r=>r.hasParent==!1).map(r=>Ws(r,e))}function Ws(e,t){if(e.inputBoxId){const n=t.find(i=>i.box.boxId==e.inputBoxId),r=Ws(n,t);return r.push(e),r}else return[e]}function vi(e,t,n,r){const i=D(n).multipliedBy(r),s=D(t).multipliedBy(e);return i.minus(s).dividedBy(e-1)}function Si(e,t,n,r,i){return t.multipliedBy(e).dividedBy(r).minus(n).multipliedBy(i)}function Xl(e,t,n,r,i){const s=D(e.toString()).dividedBy(1e9),o=D(t.toString()).dividedBy(100),l=D(r.toString()),g=D(i.toString()),a=D(10**9).dividedBy(D(n.toString())).dividedBy(100),f=Number(s.multipliedBy(a).dividedBy(o).multipliedBy(100).toFixed(0)),h=4,b=8,m=Number(vi(h,o,s,a).toFixed(0)),T=Number(D(m).dividedBy(a).toFixed(0)),k=Number(vi(b,o,s,a).toFixed(0)),A=Number(D(k).dividedBy(a).toFixed(0)),H=Number(Si(h,o,s,a,l).toFixed(0)),B=Number(Si(b,o,s,a,g).toFixed(0));return{reserveRate:f,leftUSD:m,rightUSD:k,leftERG:T,rightERG:A,leftRSV:H,rightRSV:B}}const Zt=10n,Qn=10000n;function qs(e,t,n=1n){const r=e*Zt*n/Qn,i=e-t-r;return{uiSwapFee:r,contractErg:i}}function Xs(e,t,n=1n){const r=e*Zt*n/(Qn-Zt*n);return{inputErg:e+t+r,uiSwapFee:r}}function Ks(e,t,n=1n){const r=e*Zt*n/Qn;return{userErg:e-t-r,uiSwapFee:r}}function Qs(e,t,n=1n){const r=e*Zt*n/(Qn-Zt*n),i=e+t+r;return{uiSwapFee:r,contractErg:i}}const en=200n,dt=10000n;function Ys(e,t,n,r,i){let s;const o=t*n,g=Xn(Jt(o,e),0n)/t,f=Jt(g,n)*r,h=Kn(f*en/dt),b=f+h*i;return s=Number(r)/Number(b),{contractRate:s,fee:h,bcDeltaExpectedWithFee:b}}function Kl(e,t,n,r,i){let s;const o=t*n,g=Xn(Jt(o,e),0n)/t,a=Jt(g,n),f=r*dt/(a*(dt+en*i)),h=a*f,b=Kn(h*en/dt);return s=Number(f)/Number(r),{contractRate:s,fee:b,requestSC:f}}function Js(e,t,n,r,i,s){let o;const l=t*r,g=Xn(Jt(l,e),0n),h=(e-g)/n*i,b=Kn(h*en/dt),m=h+s*b;return o=Number(i)/Number(m),{contractRate:o,fee:b,bcDeltaExpectedWithFee:m}}function Ql(e,t,n,r,i,s){let o;const l=t*r,g=Xn(Jt(l,e),0n),f=(e-g)/n,h=i*dt/(f*(dt+en*s)),b=f*h,m=Kn(b*en/dt);return o=Number(h)/Number(i),{contractRate:o,fee:m,requestRSV:h}}const Mt=1000000000n,Zs=10000n;function $n(e,t,n,r,i,s){const o=new D(t);if(!o.isNaN()&&o.gt(0)){const l=BigInt(o.multipliedBy("1000000000").integerValue(D.ROUND_FLOOR).toFixed(0)),{contractRate:g,contractFee:a,contractUSD:f,contractErg:h,uiFeeErg:b,swapFee:m,swapRate:T}=Ti(e,l,n,r,i,s),k=new D(f.toString()).dividedBy("100").toFixed(2),A=new D(1e7).multipliedBy(T).toFixed(2),H=new D(m.toString()).dividedBy("1000000000").toFixed(2);return{totalSigUSD:k,finalPrice:A,totalFee:H,contractErg:h,uiFeeErg:b}}else{const{contractRate:l,contractFee:g,contractUSD:a,contractErg:f,uiFeeErg:h,swapFee:b,swapRate:m}=Ti(e,Mt,n,r,i,s),T="",k=new D(1e7).multipliedBy(m).toFixed(2);return{totalSigUSD:T,finalPrice:k,totalFee:""}}}function Ti(e,t,n,r,i,s){let o,l;e===1n?{uiSwapFee:o,contractErg:l}=qs(t,s):{uiSwapFee:o,contractErg:l}=Qs(t,s);let{fee:g,requestSC:a}=Kl(n,r,i,l,e);e==-1n&&(a=a+1n);const{contractRate:f,bcDeltaExpectedWithFee:h}=Ys(n,r,i,a,e);e==-1n&&l<h&&(o=o+(h-l));const b=g+s+o,m=new D(a.toString()).dividedBy(t.toString());return{contractRate:f,contractFee:g,contractUSD:a,contractErg:l,uiFeeErg:o,swapFee:b,swapRate:m}}function xi(e,t,n,r,i,s){const o=new D(t).multipliedBy("100").integerValue(D.ROUND_CEIL);if(!o.isNaN()&&o.gt(0)){const{contractRate:l,feeContract:g,totalErgoRequired:a,feeTotal:f,rateTotal:h}=_i(e,o,n,r,i,s),b=new D(a.toString()).dividedBy("1000000000").toFixed(9),m=new D(1e7).multipliedBy(h).toFixed(2),T=new D(f.toString()).dividedBy("1000000000").toFixed(2);return{totalErg:b,finalPrice:m,totalFee:T}}else{const{contractRate:l,feeContract:g,totalErgoRequired:a,feeTotal:f,rateTotal:h}=_i(e,new D(Zs.toString()),n,r,i,s),b="",m=new D(1e7).multipliedBy(h).toFixed(2);return{totalErg:b,finalPrice:m,totalFee:""}}}function _i(e,t,n,r,i,s){const o=BigInt(t.toString());let l,g;const{contractRate:a,fee:f,bcDeltaExpectedWithFee:h}=Ys(n,r,i,o,e);e===1n?{inputErg:g,uiSwapFee:l}=Xs(h,s):{userErg:g,uiSwapFee:l}=Ks(h,s);const b=f+s+l,m=new D(o.toString()).dividedBy(g.toString());return{contractRate:a,feeContract:f,totalErgoRequired:g,feeTotal:b,rateTotal:m}}function Gn(e,t,n,r,i,s,o){const l=new D(t);if(!l.isNaN()&&l.gt(0)){const g=BigInt(l.multipliedBy("1000000000").integerValue(D.ROUND_FLOOR).toFixed(0)),{contractRate:a,contractFee:f,contractRSV:h,contractErg:b,uiFeeErg:m,swapFee:T,swapRate:k}=Ii(e,g,n,r,i,s,o),A=new D(h).toFixed(0),H=new D(1e9).multipliedBy(k).toFixed(0),B=new D(T.toString()).dividedBy("1000000000").toFixed(2);return{totalSigRSV:A,finalPrice:H,totalFee:B,contractErg:b,uiFeeErg:m}}else{const{contractRate:g,contractFee:a,contractRSV:f,contractErg:h,uiFeeErg:b,swapFee:m,swapRate:T}=Ii(e,Mt,n,r,i,s,o),k="",A=new D(1e9).multipliedBy(T).toFixed(0);return{totalSigRSV:k,finalPrice:A,totalFee:""}}}function Ii(e,t,n,r,i,s,o){let l,g;e===1n?{uiSwapFee:l,contractErg:g}=qs(t,o):{uiSwapFee:l,contractErg:g}=Qs(t,o);let{fee:a,requestRSV:f}=Ql(n,r,i,s,g,e);e==-1n&&(f=f+1n);const{contractRate:h,bcDeltaExpectedWithFee:b}=Js(n,r,i,s,f,e);e==1n&&g>b&&(l=l+(-b+g)),e==-1n&&g<b&&(l=l+(b-g));const m=a+o+l,T=new D(f.toString()).dividedBy(t.toString());return{contractRate:h,contractFee:a,contractRSV:f,contractErg:g,uiFeeErg:l,swapFee:m,swapRate:T}}function Bi(e,t,n,r,i,s,o){const l=new D(t).integerValue(D.ROUND_CEIL);if(!l.isNaN()&&l.gt(0)){const{contractRate:g,contractFee:a,totalErgoRequired:f,swapFee:h,swapRate:b}=ki(e,l,n,r,i,s,o),m=new D(f.toString()).dividedBy("1000000000").toFixed(9),T=new D(1e9).multipliedBy(b).toFixed(0),k=new D(h.toString()).dividedBy("1000000000").toFixed(2);return{totalErg:m,finalPrice:T,totalFee:k}}else{const{contractRate:g,contractFee:a,totalErgoRequired:f,swapFee:h,swapRate:b}=ki(e,new D(Zs.toString()),n,r,i,s,o),m="",T=new D(1e9).multipliedBy(b).toFixed(0);return{totalErg:m,finalPrice:T,totalFee:""}}}function ki(e,t,n,r,i,s,o){const l=BigInt(t.toString());let g,a;const{contractRate:f,fee:h,bcDeltaExpectedWithFee:b}=Js(n,r,i,s,l,e);e===1n?{inputErg:a,uiSwapFee:g}=Xs(b,o):{userErg:a,uiSwapFee:g}=Ks(b,o);const m=h+o+g,T=new D(l.toString()).dividedBy(a.toString());return{contractRate:f,contractFee:h,totalErgoRequired:a,swapFee:m,swapRate:T}}function Ou(e,t,n,r,i,s,o,l,g,a){if(e==="From"&&t==="ERG"&&r==="SigUSD"){const{totalSigUSD:f,finalPrice:h}=$n(Ot,n,s,o,g,a);return{to:f,price:h}}if(e==="From"&&t==="ERG"&&r==="SigRSV"){const{totalSigRSV:f,finalPrice:h}=Gn(Ot,n,s,o,l,g,a);return{to:f,price:h}}if(e==="From"&&t==="SigUSD"&&r==="ERG"){const{totalErg:f,finalPrice:h}=xi(Ft,n,s,o,g,a);return{to:f,price:h}}if(e==="From"&&t==="SigRSV"&&r==="ERG"){const{totalErg:f,finalPrice:h}=Bi(Ft,n,s,o,l,g,a);return{to:f,price:h}}if(e==="To"&&t==="ERG"&&r==="SigUSD"){const{totalErg:f,finalPrice:h}=xi(Ot,i,s,o,g,a);return{from:f,price:h}}if(e==="To"&&t==="ERG"&&r==="SigRSV"){const{totalErg:f,finalPrice:h}=Bi(Ot,i,s,o,l,g,a);return{from:f,price:h}}if(e==="To"&&t==="SigUSD"&&r==="ERG"){const{totalSigUSD:f,finalPrice:h}=$n(Ft,i,s,o,g,a);return{from:f,price:h}}if(e==="To"&&t==="SigRSV"&&r==="ERG"){const{totalSigRSV:f,finalPrice:h}=Gn(Ft,i,s,o,l,g,a);return{from:f,price:h}}}function Yl(e,t,n,r,i){const{finalPrice:s}=$n(Ot,new D(Mt.toString()),e,t,r,i),{finalPrice:o}=$n(Ft,new D(Mt.toString()),e,t,r,i),{finalPrice:l}=Gn(Ot,new D(Mt.toString()),e,t,n,r,i),{finalPrice:g}=Gn(Ft,new D(Mt.toString()),e,t,n,r,i);return{bankPriceUsdBuy:s,bankPriceUsdSell:o,bankPriceRsvBuy:l,bankPriceRsvSell:g}}function Jl(e){const t=BigInt(e.value),n=BigInt(e.assets[0].amount),r=BigInt(e.assets[1].amount),i=Nr(e.additionalRegisters.R4),s=Nr(e.additionalRegisters.R5);return{inErg:t,inSigUSD:n,inSigRSV:r,inCircSigUSD:i,inCircSigRSV:s}}function Zl(e){return{oraclePrice:Nr(e.additionalRegisters.R4)/100n}}const eu=j(0),tu=j(0),nu=j(0),ru=j(0),iu=j(0),su=j(0),ou=j(0),jr=j(1653105734759386n),Vr=j(46260638n),eo=j(46260638n),zr=j(5405405n),au=j(0),cu=j(0),to=j(0),no=j(0),lu=j(1100000n),Ri=j(),Wn=j(),Ai=j(),Ci=j();function Ni(e){var t,n,r;if(e.confirmed_erg_usd.length>0){if(((t=U(Ri))==null?void 0:t.boxId)==e.confirmed_erg_usd[0].boxId)return;Ri.set(e.confirmed_erg_usd[0])}if(e.confirmed_erg_xau.length>0){if(((n=U(Ci))==null?void 0:n.boxId)==e.confirmed_erg_xau[0].boxId)return;Ci.set(e.confirmed_erg_xau[0])}if(e.confirmed_dexygold_lp.length>0){if(((r=U(Ai))==null?void 0:r.boxId)==e.confirmed_dexygold_lp[0].boxId)return;Ai.set(e.confirmed_dexygold_lp[0])}}function Pi(e,t){var s,o,l;const n=t.filter(g=>g.transactionId&&!g.rejected).map(g=>g.tx),r=[...(s=e.history)!=null&&s[0]?[e.history[0]]:[],...(o=e.confirmed_transactions)!=null&&o[0]?[e.confirmed_transactions[0]]:[],...e.unconfirmed_transactions,...n];if(r.length<1)return;let i=Gs(r);i&&((l=U(Wn))==null?void 0:l.boxId)!=i.boxId&&Wn.set(i)}function Fu(e,t,n){var s;const r=[...e.map(o=>o.tx).slice(0,1),...t.map(o=>o.tx),...n.map(o=>o.tx)];if(r.length<1)return;let i=Gs(r);i&&((s=U(Wn))==null?void 0:s.boxId)!=i.boxId&&Wn.set(i)}function Mu(e,t){const{inErg:n,inCircSigUSD:r,inCircSigRSV:i}=Jl(t),{oraclePrice:s}=Zl(e);jr.set(n),Vr.set(r),eo.set(i),zr.set(s)}function Du(){const e=Yl(U(jr),U(Vr),U(eo),U(zr),U(lu));au.set(e.bankPriceUsdBuy),cu.set(e.bankPriceUsdSell),to.set(e.bankPriceRsvBuy),no.set(e.bankPriceRsvSell)}function Lu(){const e=Xl(U(jr),U(Vr),U(zr),U(to),U(no));eu.set(e.reserveRate),tu.set(e.leftUSD),nu.set(e.leftERG),iu.set(e.rightUSD),su.set(e.rightERG),ru.set(e.leftRSV),ou.set(e.rightRSV)}const uu={currentTime:1739100586409,network:"mainnet",name:"ergo-mainnet-5.1.0",stateType:"utxo",difficulty:0x54b0900000000,bestFullHeaderId:"b8aa9462c0d282cd3c99969c9a9082fb43ef87f2f429a0b7441f6c52f45ba502",bestHeaderId:"b8aa9462c0d282cd3c99969c9a9082fb43ef87f2f429a0b7441f6c52f45ba502",peersCount:107,unconfirmedCount:6,appVersion:"5.1.1-30-6579ceac-SNAPSHOT",eip37Supported:!0,stateRoot:"f32bce64d0f98e9aec07603ec1c9a7596573fc4a78dda436bd6288362e7a327519",genesisBlockId:"b0244dfc267baca974a4caee06120321562784303a8a688976ae56170e4d175b",previousFullHeaderId:"99174467ee35086e7f5cd63a2c7f32b448710f2b06d499913bd16c8aa8d958b1",fullHeight:1457695,headersHeight:1457695,stateVersion:"b8aa9462c0d282cd3c99969c9a9082fb43ef87f2f429a0b7441f6c52f45ba502",fullBlocksScore:2549010018711806e6,maxPeerHeight:1457695,launchTime:1739048260767,isExplorer:!0,lastSeenMessageTime:1739100565722,eip27Supported:!0,headersScore:2549010018711806e6,parameters:{outputCost:298,tokenAccessCost:100,maxBlockCost:8001091,height:1457152,maxBlockSize:1271009,dataInputCost:100,blockVersion:3,inputCost:2407,storageFeeFactor:125e4,minValuePerByte:360},isMining:!1},Oi=j(uu),fu=j(null),hu=j(null),ro=j(null),du=j(null);function Uu(){const e=new Lc("wss://ergfi.xyz:4004/socket",{params:{}});e.connect(),fu.set(e);const r=e.channel("mempool:info",{});r.join().receive("ok",m=>{Oi.set(m)}).receive("error",m=>{console.error("Unable to join info channel:",m)}),r.on("node_info",m=>{Oi.set(m)}),hu.set(r);const i="sigmausd_transactions",s=`mempool:${i}`,o=e.channel(s,{});o.join().receive("ok",m=>{Fl(m.history,U(fn)),Ei(m,U(fn)),Pi(m,U(Ce))}).receive("error",m=>{console.error("Unable to join sigmausd_transactions:",m)}),o.on(i,m=>{Ei(m,U(fn)),Pi(m,U(Ce))}),ro.set(o);const l="oracle_boxes",g=`mempool:${l}`,a=e.channel(g,{});a.join().receive("ok",m=>{Ni(m)}).receive("error",m=>{console.error("Unable to join oracle_boxes:",m)}),a.on(l,m=>{Ni(m)}),du.set(a);const b=e.channel("mempool:dexygold_transactions",{});return b.join().receive("ok",m=>{}).receive("error",m=>{console.error("Unable to join dexygold_transactions:",m)}),()=>{o.leave(),a.leave(),b.leave(),e.disconnect()}}function Hu(e,t){const n=U(ro);if(!n){console.error("No sigmausdChannel available. Make sure initMempoolChannels() was called."),yi(t);return}n.push("submit_tx",{transaction:e}).receive("ok",r=>{console.log("TX Success:",r)}).receive("error",r=>{yi(t),console.error("TX Error:",r)})}export{Iu as $,Ql as A,Js as B,Au as C,Ft as D,Yt as E,Ou as F,Mu as G,Lu as H,Du as I,Ri as J,Wn as K,lu as L,zr as M,eo as N,ar as O,Vr as P,jr as Q,cu as R,pu as S,oi as T,xu as U,au as V,fn as W,Ol as X,Rc as Y,_u as Z,Bu as _,Hn as a,Tu as a0,wu as a1,ci as a2,tu as a3,kc as a4,bu as a5,ku as a6,eu as a7,ou as a8,to as a9,no as aa,Pu as ab,Nu as ac,Ru as ad,jn as ae,Ue as af,Eu as ag,yu as ah,Qs as b,qs as c,Ks as d,Ot as e,Oi as f,Ml as g,Cu as h,Uu as i,Ur as j,Ce as k,vu as l,Ve as m,yi as n,Rr as o,Ha as p,kr as q,Xs as r,Hu as s,Su as t,Fu as u,Ps as v,Jl as w,Zl as x,Kl as y,Ys as z};
